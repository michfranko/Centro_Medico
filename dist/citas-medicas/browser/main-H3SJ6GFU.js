import{$ as Vi,$a as os,A as Ei,Aa as yt,B as S,Ba as Bi,C as w,Ca as Ui,D as v,Da as zi,E as O,F as Ti,Fa as vt,G as J,H as q,Ha as at,Ia as ji,Ja as Gi,Ka as $i,L as bi,La as Ki,M as Ai,Ma as Qi,N as Si,Na as Wi,O as T,Oa as Hi,P as St,Pa as Yi,Q as Ci,Qa as Xe,R as Pi,Ra as Ji,S as xi,Sa as Xi,Ta as Zi,Ua as ts,Va as es,Wa as ns,Xa as be,Ya as rs,Z as Ri,Za as is,_a as ss,a as Qe,aa as Di,ab as as,b as Qn,bb as cs,ca as We,cb as us,d as Yt,da as nt,db as ls,eb as hs,fa as Ni,fb as ds,g as Ee,ga as X,gb as Ze,ha as ki,hb as fs,i as fi,ia as Mi,ib as ms,ja as Oi,jb as ps,k as mi,kb as Ae,l as pi,la as He,lb as wt,m as gi,ma as Ye,mb as Jt,n as _i,na as Je,nb as gs,o as yi,oa as Fi,ob as _s,p as vi,pa as Li,pb as ys,q as wi,qa as qi,r as Te,sa as ft,sb as vs,t as Ii,ta as k,u as b,ua as mt,v as R,va as pt,w as Y,y as C,ya as gt,za as _t}from"./chunk-Q3H77G3L.js";var tn=class s{static \u0275fac=function(r){return new(r||s)};static \u0275cmp=Y({type:s,selectors:[["app-root"]],decls:1,vars:0,template:function(r,a){r&1&&O(0,"router-outlet")},dependencies:[He],encapsulation:2})};function Ho(s,e){s&1&&(w(0,"small"),T(1,"El correo es obligatorio."),v())}function Yo(s,e){s&1&&(w(0,"small"),T(1,"Correo inv\xE1lido."),v())}function Jo(s,e){if(s&1&&(w(0,"div",8),C(1,Ho,2,0,"small",9)(2,Yo,2,0,"small",9),v()),s&2){let r,a,h=q();b(),S("ngIf",(r=h.loginForm.get("email"))==null||r.errors==null?null:r.errors.required),b(),S("ngIf",(a=h.loginForm.get("email"))==null||a.errors==null?null:a.errors.email)}}function Xo(s,e){s&1&&(w(0,"div",8)(1,"small"),T(2,"La contrase\xF1a es obligatoria."),v()())}var en=class s{constructor(e,r){this.fb=e;this.authService=r;this.loginForm=this.fb.group({email:["",[k.required,k.email]],password:["",[k.required]]})}loginForm;ngOnInit(){}login(){let{email:e,password:r}=this.loginForm.value;this.authService.login(e,r).catch(a=>{console.error("Error al iniciar sesi\xF3n:",a)})}loginWithGoogle(){this.authService.loginWithGoogle().catch(e=>{console.error("Error al iniciar sesi\xF3n con Google:",e)})}resetPassword(){let e=this.loginForm.get("email")?.value;if(!e){alert("Ingresa tu correo electr\xF3nico para recuperar la contrase\xF1a.");return}this.authService.resetPassword(e).then(()=>alert("Correo de recuperaci\xF3n enviado.")).catch(r=>console.error("Error al enviar correo:",r))}static \u0275fac=function(r){return new(r||s)(R(vt),R(wt))};static \u0275cmp=Y({type:s,selectors:[["app-login"]],decls:14,vars:4,consts:[[1,"login-form",3,"ngSubmit","formGroup"],["formControlName","email","placeholder","Correo electr\xF3nico","type","email",1,"input-field"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","placeholder","Contrase\xF1a",1,"input-field"],["type","submit",1,"btn","primary-btn",3,"disabled"],["type","button",1,"btn","google-btn",3,"click"],["routerLink","/reset-password",1,"link"],["routerLink","/register",1,"link"],[1,"error-message"],[4,"ngIf"]],template:function(r,a){if(r&1&&(w(0,"form",0),J("ngSubmit",function(){return a.login()}),O(1,"input",1),C(2,Jo,3,2,"div",2),O(3,"input",3),C(4,Xo,3,0,"div",2),w(5,"button",4),T(6,"Iniciar Sesi\xF3n"),v(),w(7,"button",5),J("click",function(){return a.loginWithGoogle()}),T(8,"Iniciar con Google"),v(),w(9,"a",6),T(10,"\xBFOlvidaste tu contrase\xF1a?"),v(),O(11,"br"),w(12,"a",7),T(13,"Crear una cuenta"),v()()),r&2){let h,y;S("formGroup",a.loginForm),b(2),S("ngIf",((h=a.loginForm.get("email"))==null?null:h.invalid)&&((h=a.loginForm.get("email"))==null?null:h.touched)),b(2),S("ngIf",((y=a.loginForm.get("password"))==null?null:y.invalid)&&((y=a.loginForm.get("password"))==null?null:y.touched)),b(),S("disabled",a.loginForm.invalid)}},dependencies:[at,gt,ft,mt,pt,_t,yt,X,nt,Je],styles:[".login-form[_ngcontent-%COMP%]{min-width:250px;width:calc(100% - 120px);max-width:350px;padding:20px 25px;margin:auto 30px;background-color:#fdfdfd;border-radius:8px;box-shadow:4px 4px 9px #00e1ff4d;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;box-sizing:border-box}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px 14px;margin-top:12px;border:1px solid #ccc;border-radius:6px;font-size:1rem;box-sizing:border-box;transition:border-color .3s,box-shadow .3s}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 6px #007bffaa}.error-message[_ngcontent-%COMP%]{color:#a50b009d;font-size:.85rem;margin-top:4px;min-width:fit-content;max-width:100%}.btn[_ngcontent-%COMP%]{display:block;width:100%;padding:12px 0;margin-top:20px;font-size:1.1rem;border:none;border-radius:6px;font-weight:600;transition:background-color .3s ease,box-shadow .3s ease;-webkit-user-select:none;user-select:none;cursor:pointer}.primary-btn[_ngcontent-%COMP%]{background-color:#1385ff;color:#fff;box-shadow:0 4px 6px #1385ff66}.primary-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0f74e6;box-shadow:0 6px 8px #0f74e699}.primary-btn[_ngcontent-%COMP%]:disabled{background-color:#7aa7e9;cursor:not-allowed;box-shadow:none}.primary-btn[_ngcontent-%COMP%]:not(:disabled):hover{cursor:pointer}.google-btn[_ngcontent-%COMP%]{background-color:#dd4c39c9;color:#fff;margin-top:10px;box-shadow:0 4px 6px #dd4c3980}.google-btn[_ngcontent-%COMP%]:hover{background-color:#c23321;box-shadow:0 6px 8px #c23321b3;cursor:pointer}.link[_ngcontent-%COMP%]{display:inline-block;margin-top:15px;color:#007bff;text-decoration:none;font-size:.9rem;transition:color .3s ease}.link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#0056b3}@media screen and (min-width: 600px){.login-form[_ngcontent-%COMP%]{width:350px}}@media (max-width: 600px){.login-form[_ngcontent-%COMP%]{min-width:unset;width:95vw;max-width:98vw;margin:10px auto;padding:15px 12px;box-shadow:2px 2px 6px #00e1ff33}.input-field[_ngcontent-%COMP%]{font-size:.98rem;padding:8px 10px}.btn[_ngcontent-%COMP%]{font-size:1rem;padding:10px 0}}"]})};function ta(s,e){if(s&1){let r=Ti();w(0,"div",9)(1,"label",10)(2,"input",11),J("click",function(){yi(r);let h=q();return vi(h.cerrarMenu())}),v(),O(3,"span")(4,"span")(5,"span"),v()()}}function ea(s,e){if(s&1&&(w(0,"div",12)(1,"strong"),T(2),v()()),s&2){let r=q();b(2),Ci("\u{1F514} Tienes ",r.citasPendientes.length," cita(s) pendientes de confirmaci\xF3n o resoluci\xF3n.")}}var sn=class s{constructor(e,r,a){this.authService=e;this.router=r;this.citasService=a;this.uidSub=this.authService.getUid().subscribe(h=>{this.usuarioId=h,h&&(this.citasSub=this.citasService.getCitas().subscribe(y=>{this.citasPendientes=(y||[]).filter(E=>E.pacienteId===h&&E.estado==="pendiente")}))})}menuOpen=!1;isDesktop=window.innerWidth>900;citasPendientes=[];usuarioId=null;cerrarMenu(){this.menuOpen=!this.menuOpen}uidSub;citasSub;onResize(){this.isDesktop=window.innerWidth>900,this.isDesktop&&(this.menuOpen=!1)}logout(){this.authService.logout().then(()=>{this.router.navigate(["/"])})}ngOnDestroy(){this.uidSub?.unsubscribe(),this.citasSub?.unsubscribe()}static \u0275fac=function(r){return new(r||s)(R(wt),R(Ye),R(Jt))};static \u0275cmp=Y({type:s,selectors:[["app-paciente-dashboard"]],hostBindings:function(r,a){r&1&&J("resize",function(){return a.onResize()},Ii)},decls:20,vars:4,consts:[["class","topbar",4,"ngIf"],[1,"sidebar"],["routerLink","perfil","routerLinkActive","active",3,"click"],["routerLink","solicitar-cita","routerLinkActive","active",3,"click"],["routerLink","mis-citas","routerLinkActive","active",3,"click"],[2,"cursor","pointer",3,"click"],[1,"dashboard"],[1,"content"],["class","notificacion-citas-pendientes-paciente",4,"ngIf"],[1,"topbar"],["for","burger",1,"burger"],["type","checkbox","id","burger",3,"click"],[1,"notificacion-citas-pendientes-paciente"]],template:function(r,a){r&1&&(C(0,ta,6,0,"div",0),w(1,"aside",1)(2,"nav")(3,"ul")(4,"li")(5,"a",2),J("click",function(){return a.menuOpen=!1}),T(6,"Perfil"),v()(),w(7,"li")(8,"a",3),J("click",function(){return a.menuOpen=!1}),T(9,"Solicitar Cita"),v()(),w(10,"li")(11,"a",4),J("click",function(){return a.menuOpen=!1}),T(12,"Mis Citas"),v()(),w(13,"li")(14,"a",5),J("click",function(){return a.logout(),a.menuOpen=!1}),T(15,"Cerrar sesi\xF3n"),v()()()()(),w(16,"div",6)(17,"main",7),C(18,ea,3,1,"div",8),O(19,"router-outlet"),v()()),r&2&&(S("ngIf",!a.isDesktop),b(),Si("open",a.menuOpen||a.isDesktop),b(17),S("ngIf",a.citasPendientes.length>0))},dependencies:[X,nt,qi,He,Je,Fi],styles:["@media (min-width: 901px){.topbar[_ngcontent-%COMP%]{display:none}.dashboard[_ngcontent-%COMP%]{display:flex;height:100vh}.sidebar[_ngcontent-%COMP%]{width:240px;background-color:#2c3e50;color:#fff;padding:1rem;position:fixed;top:0;left:0;height:100vh;overflow-y:auto;box-sizing:border-box;box-shadow:2px 0 5px #0000004d}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1rem 0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:400;transition:color .3s ease}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#f39c12;font-weight:700;text-decoration:underline}.content[_ngcontent-%COMP%]{margin-left:240px;padding:1rem;flex:1;overflow-y:auto;height:100vh;box-sizing:border-box}.notificacion-citas-pendientes-paciente[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:1rem;margin-bottom:1rem;border-radius:8px;font-weight:700}}.burger[_ngcontent-%COMP%]{margin:3px 0;position:relative;width:40px;height:30px;background:transparent;cursor:pointer;display:block}.burger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.burger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;position:absolute;height:4px;width:100%;background:#fff;border-radius:9px;opacity:1;left:0;transform:rotate(0);transition:.25s ease-in-out}.burger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(1){top:0;transform-origin:left center}.burger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(2){top:50%;transform:translateY(-50%);transform-origin:left center}.burger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(3){top:100%;transform-origin:left center;transform:translateY(-100%)}.burger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-of-type(1){transform:rotate(45deg);top:0;left:5px}.burger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-of-type(2){width:0%;opacity:0}.burger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-of-type(3){transform:rotate(-45deg);top:28px;left:5px}@media (max-width: 900px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:50px;left:0;width:100%;background-color:#2c3e50;color:#fff;max-height:0;overflow:hidden;transition:max-height .3s ease;box-shadow:0 2px 5px #0000004d;border-bottom-left-radius:8px;border-bottom-right-radius:8px;z-index:1100;padding-left:0;padding-right:0}.sidebar.open[_ngcontent-%COMP%]{max-height:300px;padding:1rem 0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:1rem;padding-right:1rem}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.75rem 0;list-style:none;font-size:20px}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:400}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#f1c40f;font-weight:700;text-decoration:underline}.topbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#2c3e50;color:#fff;padding:.75rem 1rem;position:fixed;top:0;left:0;right:0;z-index:1200}.content[_ngcontent-%COMP%]{margin-top:50px;padding:1rem;flex:1;overflow-y:auto;width:100%}.notificacion-citas-pendientes-paciente[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:1rem;margin-bottom:1rem;border-radius:8px;font-weight:700}.mobile-menu[_ngcontent-%COMP%]{position:fixed;top:-50vh;left:0;right:0;background-color:#2c3e50;color:#ecf0f1;max-height:calc(100vh - 56px);overflow-y:auto;z-index:1;box-shadow:0 4px 8px #0003;border-bottom-left-radius:6px;border-bottom-right-radius:6px;transition:top .4s cubic-bezier(.075,.82,.165,1)}.activo[_ngcontent-%COMP%]{top:56px}}"]})};function ra(s,e){s&1&&(w(0,"div",12),T(1,"El nombre es obligatorio."),v())}function ia(s,e){s&1&&(w(0,"div",12),T(1,"La direcci\xF3n es obligatoria."),v())}function sa(s,e){s&1&&(w(0,"div",12),T(1,"La fecha de nacimiento es obligatoria."),v())}function oa(s,e){if(s&1&&(w(0,"div",1)(1,"h2"),T(2,"Mi Perfil"),v(),w(3,"form",2)(4,"label",3),T(5,"Nombre:"),v(),O(6,"input",4),C(7,ra,2,0,"div",5),w(8,"label",6),T(9,"Direcci\xF3n:"),v(),O(10,"input",7),C(11,ia,2,0,"div",5),w(12,"label",8),T(13,"Fecha de Nacimiento:"),v(),O(14,"input",9),C(15,sa,2,0,"div",5),w(16,"label",10),T(17,"Email:"),v(),O(18,"input",11),v()()),s&2){let r,a,h,y=q();b(3),S("formGroup",y.form),b(3),S("readonly",!y.editMode),b(),S("ngIf",y.editMode&&((r=y.form.get("nombre"))==null?null:r.invalid)&&((r=y.form.get("nombre"))==null?null:r.touched)),b(3),S("readonly",!y.editMode),b(),S("ngIf",y.editMode&&((a=y.form.get("direccion"))==null?null:a.invalid)&&((a=y.form.get("direccion"))==null?null:a.touched)),b(3),S("readonly",!y.editMode),b(),S("ngIf",y.editMode&&((h=y.form.get("fechaNacimiento"))==null?null:h.invalid)&&((h=y.form.get("fechaNacimiento"))==null?null:h.touched))}}var on=class s{constructor(e,r,a){this.fb=e;this.usuarioService=r;this.auth=a}form;usuarioActual;editMode=!1;ngOnInit(){this.usuarioService.getPerfil().subscribe(e=>{if(this.isPaciente(e)){let r="";if(e.fechaNacimiento)r=e.fechaNacimiento;else if(e.fecha_nacimiento){let a=e.fecha_nacimiento;if(a)if(/^\d{4}-\d{2}-\d{2}$/.test(a))r=a;else{let h=new Date(a);isNaN(h.getTime())||(r=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}-${h.getDate().toString().padStart(2,"0")}`)}}this.usuarioActual=Qn(Qe({},e),{fechaNacimiento:r}),this.initForm(this.usuarioActual,!0)}},()=>{alert("Error al obtener los datos del usuario.")})}isPaciente(e){return e&&e.rol==="paciente"}initForm(e,r){this.form=this.fb.group({nombre:[e.nombre,k.required],direccion:[e.direccion,k.required],contacto:[e.contacto,k.required],fechaNacimiento:[e.fechaNacimiento,k.required],email:[{value:e.email,disabled:!0}]}),r?this.form.disable():this.form.enable()}toggleEdit(){this.editMode?this.guardar():(this.editMode=!0,this.initForm(this.usuarioActual,!1))}cancelar(){this.editMode=!1,this.usuarioActual&&this.initForm(this.usuarioActual,!0)}guardar(){if(!this.form.valid||!this.usuarioActual?.uid){alert("ID de usuario inv\xE1lido. No se puede actualizar el perfil.");return}let e=Number(this.usuarioActual.uid),r=Qn(Qe(Qe({},this.usuarioActual),this.form.getRawValue()),{rol:"paciente"});this.usuarioService.updateUsuario(e,r).subscribe({next:()=>{this.usuarioService.getPerfil().subscribe(a=>{this.isPaciente(a)&&(this.usuarioActual=a,this.initForm(a,!0))},()=>alert("Error al refrescar los datos del paciente."))},error:()=>alert("Error al actualizar el perfil del paciente.")})}static \u0275fac=function(r){return new(r||s)(R(vt),R(gs),R(Ze))};static \u0275cmp=Y({type:s,selectors:[["app-paciente-perfil"]],decls:1,vars:1,consts:[["class","perfil-container",4,"ngIf"],[1,"perfil-container"],[3,"formGroup"],["for","nombre"],["id","nombre","type","text","formControlName","nombre",3,"readonly"],["class","error-message",4,"ngIf"],["for","direccion"],["id","direccion","type","text","formControlName","direccion",3,"readonly"],["for","fechaNacimiento"],["id","fechaNacimiento","type","date","formControlName","fechaNacimiento",3,"readonly"],["for","email"],["id","email","type","email","formControlName","email","readonly",""],[1,"error-message"]],template:function(r,a){r&1&&C(0,oa,19,7,"div",0),r&2&&S("ngIf",a.form)},dependencies:[X,nt,at,gt,ft,mt,pt,_t,yt],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:500px;margin:auto;padding:1.5rem;border:1px solid #ccc;border-radius:10px;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center}label[_ngcontent-%COMP%]{display:block;margin-top:1rem;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-top:.3rem;border:1px solid #ddd;border-radius:5px}button[_ngcontent-%COMP%]{margin-top:1.5rem;padding:.5rem 1rem;background-color:#2d8fdd;color:#fff;border:none;border-radius:5px;cursor:pointer}@media (min-width: 901px){.perfil-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2.5rem 3rem;box-shadow:0 2px 12px #00000012}input[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 900px){.perfil-container[_ngcontent-%COMP%]{max-width:98vw;min-width:0;margin:2rem auto 0;padding:1.2rem .7rem;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;text-align:left}input[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.7rem}}"]})};var an=class s{constructor(e){this.http=e}apiUrl=`${Ae.apiUrl}/pacientes`;getPacientes(){return this.http.get(this.apiUrl)}getPacienteById(e){return this.http.get(`${this.apiUrl}/${e}`)}createPaciente(e){return this.http.post(this.apiUrl,e)}updatePaciente(e,r){return this.http.put(`${this.apiUrl}/${e}`,r)}deletePaciente(e){return this.http.delete(`${this.apiUrl}/${e}`)}getPacienteByUid(e){return this.http.get(`${Ae.apiUrl}/usuarios/uid/${e}`)}static \u0275fac=function(r){return new(r||s)(pi(Mi))};static \u0275prov=fi({token:s,factory:s.\u0275fac,providedIn:"root"})};function ca(s,e){if(s&1&&(w(0,"option",3),T(1),v()),s&2){let r=e.$implicit;S("ngValue",r.id),b(),Pi(" ",r.nombre," - ",r.especialidad," ")}}function ua(s,e){if(s&1&&(w(0,"option",3),T(1),v()),s&2){let r=e.$implicit;S("ngValue",r.id),b(),xi(" ",r.fecha," - ",r.horaInicio," a ",r.horaFin," ")}}function la(s,e){if(s&1&&(w(0,"div")(1,"label",10),T(2,"Fechas y Horarios Disponibles:"),v(),w(3,"select",11)(4,"option",3),T(5,"--Seleccione una agenda--"),v(),C(6,ua,2,4,"option",4),v()()),s&2){let r=q();b(4),S("ngValue",null),b(2),S("ngForOf",r.agendasDisponibles)}}function ha(s,e){s&1&&(w(0,"div")(1,"p",12),T(2,"Este m\xE9dico no tiene agendas disponibles."),v()())}function da(s,e){if(s&1&&(w(0,"p"),T(1),v()),s&2){let r=q();Ai("color",r.mensaje.includes("\u2705")?"green":"red"),b(),St(r.mensaje)}}var cn=class s{constructor(e,r,a,h,y,E,A){this.fb=e;this.medicoService=r;this.citasService=a;this.agendaService=h;this.auth=y;this.notificacionesService=E;this.pacienteService=A}form;medicos=[];agendasDisponibles=[];mensaje="";nombreMedicoSeleccionado="";isLoading=!1;ngOnInit(){this.initForm(),this.loadMedicos(),this.setupMedicoSelectionListener()}initForm(){this.form=this.fb.group({medicoId:[null,k.required],agendaId:[null,k.required],motivo:["",[k.required,k.minLength(10)]]})}setupMedicoSelectionListener(){this.form.get("medicoId")?.valueChanges.subscribe(e=>{if(e){let r=this.medicos.find(a=>a.id===e);this.nombreMedicoSeleccionado=r?.nombre||"",this.cargarAgendasDisponibles(e),this.form.get("agendaId")?.setValue("")}})}loadMedicos(){this.isLoading=!0,this.medicoService.getMedicos().pipe(Ee(()=>this.isLoading=!1)).subscribe({next:e=>this.medicos=e,error:()=>this.mensaje="\u274C Error al cargar los m\xE9dicos. Intente m\xE1s tarde."})}cargarAgendasDisponibles(e){this.isLoading=!0,this.agendaService.getAgendasByMedico(e).pipe(Ee(()=>this.isLoading=!1)).subscribe({next:r=>{let a=new Date;this.agendasDisponibles=r.filter(h=>{let y=new Date(`${h.fecha}T${h.horaInicio}`);return h.disponible&&y>a}),this.agendasDisponibles.length===0&&(this.mensaje="No hay horarios disponibles para este m\xE9dico.")},error:()=>this.mensaje="\u274C Error al cargar los horarios disponibles."})}solicitarCita(){if(this.mensaje="",this.form.invalid){this.marcarControlesComoTouched(),this.mensaje="\u274C Por favor, complete todos los campos correctamente.";return}let e=this.auth.currentUser;if(!e){this.mensaje="\u274C Debe estar autenticado para solicitar una cita.";return}let r=this.agendasDisponibles.find(a=>a.id===this.form.value.agendaId);if(!r||r.disponible!==!0||!r.id||!r.fecha||!r.horaInicio||!r.horaFin){this.mensaje="\u274C La agenda seleccionada no es v\xE1lida o no est\xE1 disponible.";return}this.isLoading=!0,this.pacienteService.getPacienteByUid(e.uid).pipe(Ee(()=>this.isLoading=!1)).subscribe({next:a=>{if(!a?.id){this.mensaje="\u274C No se encontr\xF3 el paciente en el sistema.";return}let y=new Date(r.fecha).toISOString().split("T")[0],E=this.formatHora(r.horaInicio),A=this.formatHora(r.horaFin),V={pacienteId:a.id,medicoId:r.medico?.id||this.form.value.medicoId,agendaId:r.id,motivo:this.form.value.motivo,estado:"pendiente",fecha:y,horaInicio:E,horaFin:A};console.log("\u{1F4E4} Enviando citaPayload:",V),this.isLoading=!0,this.citasService.solicitarCita(V).pipe(Ee(()=>this.isLoading=!1)).subscribe({next:()=>this.onCitaSolicitadaExitosamente(),error:F=>this.handleCitaError(F)})},error:()=>{this.mensaje="\u274C Error al obtener datos del paciente."}})}onCitaSolicitadaExitosamente(){this.mensaje="\u2705 Cita solicitada correctamente. Recibir\xE1s una notificaci\xF3n por correo electr\xF3nico cuando sea gestionada.",this.notificacionesService.mostrarNotificacion("\xA1Solicitud Enviada!","Recibir\xE1s una notificaci\xF3n por correo electr\xF3nico cuando tu cita sea gestionada.","success");let e=this.form.value.agendaId;this.agendaService.updateDisponibilidadAgenda(e,!1).subscribe(),this.form.reset(),this.agendasDisponibles=[],this.nombreMedicoSeleccionado=""}handleCitaError(e){console.error("Error al solicitar cita:",e),e?.error?.message?this.mensaje=`\u274C ${e.error.message}`:e?.error?this.mensaje=`\u274C ${e.error}`:this.mensaje="\u274C Error al solicitar cita. Intente m\xE1s tarde."}marcarControlesComoTouched(){Object.values(this.form.controls).forEach(e=>{e.markAsTouched()})}formatHora(e){let r=new Date(`1970-01-01T${e}`),a=String(r.getHours()).padStart(2,"0"),h=String(r.getMinutes()).padStart(2,"0"),y=String(r.getSeconds()).padStart(2,"0");return`${a}:${h}:${y}`}static \u0275fac=function(r){return new(r||s)(R(vt),R(_s),R(Jt),R(ys),R(Ze),R(vs),R(an))};static \u0275cmp=Y({type:s,selectors:[["app-paciente-solicitar-cita"]],decls:17,vars:6,consts:[[3,"ngSubmit","formGroup"],["for","medico"],["id","medico","formControlName","medicoId"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],["for","motivo"],["id","motivo","formControlName","motivo","rows","3"],["type","submit"],[3,"color",4,"ngIf"],["for","agenda"],["id","agenda","formControlName","agendaId"],[2,"color","red"]],template:function(r,a){if(r&1&&(w(0,"h2"),T(1,"Solicitar Cita M\xE9dica"),v(),w(2,"form",0),J("ngSubmit",function(){return a.solicitarCita()}),w(3,"label",1),T(4,"M\xE9dico:"),v(),w(5,"select",2)(6,"option",3),T(7,"--Seleccione un m\xE9dico--"),v(),C(8,ca,2,3,"option",4),v(),C(9,la,7,2,"div",5)(10,ha,3,0,"div",5),w(11,"label",6),T(12,"Motivo:"),v(),O(13,"textarea",7),w(14,"button",8),T(15,"Solicitar Cita"),v()(),C(16,da,2,3,"p",9)),r&2){let h;b(2),S("formGroup",a.form),b(4),S("ngValue",null),b(2),S("ngForOf",a.medicos),b(),S("ngIf",a.agendasDisponibles.length>0),b(),S("ngIf",((h=a.form.get("medicoId"))==null?null:h.value)&&a.agendasDisponibles.length===0),b(6),S("ngIf",a.mensaje)}},dependencies:[X,We,nt,at,gt,Ui,zi,ft,Bi,mt,pt,_t,yt],styles:["form[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:15px;border:1px solid #ccc;border-radius:8px;background-color:#fafafa;box-shadow:0 2px 6px #0000001a}label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600;color:#333}input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:8px 10px;margin-bottom:15px;border:1px solid #bbb;border-radius:4px;font-size:14px;font-family:inherit;box-sizing:border-box;transition:border-color .3s ease}input[type=date][_ngcontent-%COMP%]:focus, input[type=time][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#4a90e2;outline:none;background-color:#fff}button[type=submit][_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff;border:none;padding:10px 15px;border-radius:4px;font-size:16px;cursor:pointer;font-weight:600;transition:background-color .3s ease;width:100%}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#357abd}p[_ngcontent-%COMP%]{margin-top:15px;font-weight:600;color:#d9534f}p[_ngcontent-%COMP%]:empty{display:none}@media (min-width: 901px){form[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2.5rem 3rem;box-shadow:0 2px 12px #00000012}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 900px){form[_ngcontent-%COMP%]{max-width:95vw;margin:1rem auto;padding:1rem}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1rem}}"]})};function fa(s,e){if(s&1&&(w(0,"tr")(1,"td"),T(2),v(),w(3,"td"),T(4),v(),w(5,"td"),T(6),Ri(7,"date"),v(),w(8,"td"),T(9),v(),w(10,"td"),T(11),v(),w(12,"td"),T(13),v()()),s&2){let r=e.$implicit;b(2),St(r.id),b(2),St(r.medico==null?null:r.medico.nombre),b(2),St(Vi(7,6,r.fecha,"dd/MM/yyyy")),b(3),St(r.horaInicio),b(2),St(r.motivo),b(2),St(r.estado)}}function ma(s,e){if(s&1&&(w(0,"div")(1,"table",3)(2,"thead")(3,"tr")(4,"th"),T(5,"ID"),v(),w(6,"th"),T(7,"M\xE9dico"),v(),w(8,"th"),T(9,"Fecha"),v(),w(10,"th"),T(11,"Hora"),v(),w(12,"th"),T(13,"Motivo"),v(),w(14,"th"),T(15,"Estado"),v()()(),w(16,"tbody"),C(17,fa,14,9,"tr",4),v()()()),s&2){let r=q();b(17),S("ngForOf",r.citas)}}function pa(s,e){s&1&&(w(0,"p"),T(1,"No tiene citas programadas."),v())}var un=class s{constructor(e,r){this.citasService=e;this.authService=r}citas=[];pacienteId=null;ngOnInit(){this.authService.getPerfil().then(e=>{e&&e.id&&(this.pacienteId=e.id,this.loadCitas())})}loadCitas(){this.pacienteId&&this.citasService.getCitasByPaciente(this.pacienteId).subscribe(e=>{this.citas=e})}static \u0275fac=function(r){return new(r||s)(R(Jt),R(wt))};static \u0275cmp=Y({type:s,selectors:[["app-paciente-mis-citas"]],decls:6,vars:2,consts:[["noCitas",""],[1,"container","mt-4"],[4,"ngIf","ngIfElse"],[1,"table","table-striped"],[4,"ngFor","ngForOf"]],template:function(r,a){if(r&1&&(w(0,"div",1)(1,"h2"),T(2,"Mis Citas"),v(),C(3,ma,18,1,"div",2)(4,pa,2,0,"ng-template",null,0,Di),v()),r&2){let h=bi(5);b(3),S("ngIf",a.citas.length>0)("ngIfElse",h)}},dependencies:[X,We,nt,Ni],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin:0 auto;padding:1.5rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333;background-color:#f8f9fa}.table[_ngcontent-%COMP%]{margin-top:1.5rem;width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e9ecef;padding:.75rem;font-weight:600;text-align:left;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;border-bottom:1px solid #dee2e6}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f3f5}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0 auto}li[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dee2e6;margin-bottom:1rem;padding:1.25rem;border-radius:8px;box-shadow:0 2px 6px #0000000a;transition:box-shadow .2s ease-in-out}li[_ngcontent-%COMP%]:hover{box-shadow:0 4px 10px #00000014}button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:8px 16px;cursor:pointer;border-radius:6px;font-weight:500;font-size:.95rem;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#c82333}button[_ngcontent-%COMP%]:disabled{background-color:#adb5bd;cursor:not-allowed}@media (min-width: 901px){ul[_ngcontent-%COMP%]{max-width:700px}li[_ngcontent-%COMP%]{font-size:1.05rem;padding:1.5rem}}@media (max-width: 900px){ul[_ngcontent-%COMP%]{max-width:95vw}li[_ngcontent-%COMP%]{font-size:1rem;padding:1.25rem}}"]})};function ga(s,e){s&1&&(w(0,"small"),T(1,"El nombre es obligatorio."),v())}function _a(s,e){if(s&1&&(w(0,"div",15),C(1,ga,2,0,"small",16),v()),s&2){let r=q();b(),S("ngIf",r.f.nombre.errors.required)}}function ya(s,e){s&1&&(w(0,"small"),T(1,"La direcci\xF3n es obligatoria."),v())}function va(s,e){if(s&1&&(w(0,"div",15),C(1,ya,2,0,"small",16),v()),s&2){let r=q();b(),S("ngIf",r.f.direccion.errors.required)}}function wa(s,e){s&1&&(w(0,"small"),T(1,"La fecha de nacimiento es obligatoria."),v())}function Ia(s,e){if(s&1&&(w(0,"div",15),C(1,wa,2,0,"small",16),v()),s&2){let r=q();b(),S("ngIf",r.f.fechaNacimiento.errors.required)}}function Ea(s,e){s&1&&(w(0,"small"),T(1,"El correo es obligatorio."),v())}function Ta(s,e){s&1&&(w(0,"small"),T(1,"Ingrese un correo v\xE1lido."),v())}function ba(s,e){if(s&1&&(w(0,"div",15),C(1,Ea,2,0,"small",16)(2,Ta,2,0,"small",16),v()),s&2){let r=q();b(),S("ngIf",r.f.email.errors.required),b(),S("ngIf",r.f.email.errors.email)}}function Aa(s,e){s&1&&(w(0,"small"),T(1,"La contrase\xF1a es obligatoria."),v())}function Sa(s,e){s&1&&(w(0,"small"),T(1,"La contrase\xF1a debe tener al menos 6 caracteres."),v())}function Ca(s,e){if(s&1&&(w(0,"div",15),C(1,Aa,2,0,"small",16)(2,Sa,2,0,"small",16),v()),s&2){let r=q();b(),S("ngIf",r.f.password.errors.required),b(),S("ngIf",r.f.password.errors.minlength)}}function Pa(s,e){s&1&&(w(0,"small"),T(1,"Debe confirmar la contrase\xF1a."),v())}function xa(s,e){s&1&&(w(0,"small"),T(1,"Las contrase\xF1as no coinciden."),v())}function Ra(s,e){if(s&1&&(w(0,"div",15),C(1,Pa,2,0,"small",16)(2,xa,2,0,"small",16),v()),s&2){let r=q();b(),S("ngIf",r.f.confirmPassword.errors==null?null:r.f.confirmPassword.errors.required),b(),S("ngIf",r.registerForm.errors==null?null:r.registerForm.errors.passwordsMismatch)}}var ln=class s{constructor(e,r){this.fb=e;this.authService=r}registerForm;submitted=!1;ngOnInit(){this.registerForm=this.fb.group({nombre:["",k.required],direccion:["",k.required],fechaNacimiento:["",k.required],email:["",[k.required,k.email]],password:["",[k.required,k.minLength(6)]],confirmPassword:["",k.required]},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(e){let r=e.get("password")?.value,a=e.get("confirmPassword")?.value;return r===a?null:{passwordsMismatch:!0}}get f(){return this.registerForm.controls}register(){if(this.submitted=!0,this.registerForm.invalid)return;let{nombre:e,direccion:r,fechaNacimiento:a,email:h,password:y}=this.registerForm.value;this.authService.registerPaciente({email:h,password:y,nombre:e,direccion:r,fechaNacimiento:a}).catch(E=>{console.error("Error al registrar:",E),E.code==="auth/email-already-in-use"?alert("El correo ya est\xE1 registrado."):E.code==="auth/invalid-email"?alert("Correo electr\xF3nico inv\xE1lido."):E.code==="auth/weak-password"?alert("La contrase\xF1a debe tener al menos 6 caracteres."):alert("Error al registrar: "+E.message)})}static \u0275fac=function(r){return new(r||s)(R(vt),R(wt))};static \u0275cmp=Y({type:s,selectors:[["app-register"]],decls:29,vars:8,consts:[["novalidate","",3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","type","text","formControlName","nombre","placeholder","Tu nombre completo"],["class","error-msg",4,"ngIf"],["for","direccion"],["id","direccion","type","text","formControlName","direccion","placeholder","Tu direcci\xF3n"],["for","fechaNacimiento"],["id","fechaNacimiento","type","date","formControlName","fechaNacimiento"],["for","email"],["id","email","type","email","formControlName","email","placeholder","ejemplo@correo.com"],["for","password"],["id","password","type","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Repita la contrase\xF1a"],["type","submit",3,"disabled"],[1,"error-msg"],[4,"ngIf"]],template:function(r,a){r&1&&(w(0,"form",0),J("ngSubmit",function(){return a.register()}),w(1,"h2"),T(2,"Registro de Usuario"),v(),w(3,"label",1),T(4,"Nombre completo"),v(),O(5,"input",2),C(6,_a,2,1,"div",3),w(7,"label",4),T(8,"Direcci\xF3n"),v(),O(9,"input",5),C(10,va,2,1,"div",3),w(11,"label",6),T(12,"Fecha de nacimiento"),v(),O(13,"input",7),C(14,Ia,2,1,"div",3),w(15,"label",8),T(16,"Correo electr\xF3nico"),v(),O(17,"input",9),C(18,ba,3,2,"div",3),w(19,"label",10),T(20,"Contrase\xF1a"),v(),O(21,"input",11),C(22,Ca,3,2,"div",3),w(23,"label",12),T(24,"Confirmar Contrase\xF1a"),v(),O(25,"input",13),C(26,Ra,3,2,"div",3),w(27,"button",14),T(28,"Registrar"),v()()),r&2&&(S("formGroup",a.registerForm),b(6),S("ngIf",a.submitted&&a.f.nombre.errors),b(4),S("ngIf",a.submitted&&a.f.direccion.errors),b(4),S("ngIf",a.submitted&&a.f.fechaNacimiento.errors),b(4),S("ngIf",a.submitted&&a.f.email.errors),b(4),S("ngIf",a.submitted&&a.f.password.errors),b(4),S("ngIf",a.submitted&&(a.f.confirmPassword.errors||(a.registerForm.errors==null?null:a.registerForm.errors.passwordsMismatch))),b(),S("disabled",a.registerForm.invalid))},dependencies:[at,gt,ft,mt,pt,_t,yt,X,nt],styles:[".register-container[_ngcontent-%COMP%]{max-width:400px;margin:auto;padding:30px 20px;border-radius:10px;background-color:#fff;box-shadow:0 8px 20px #00000014;border:1px solid #e2e8f0;font-family:Roboto,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;flex-direction:column;justify-content:center;min-height:90vh;box-sizing:border-box;transition:box-shadow .3s ease}.register-container[_ngcontent-%COMP%]:hover{box-shadow:0 12px 30px #007bff26}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px;color:#222;font-weight:700;font-size:2rem;letter-spacing:.05em;font-family:Roboto Slab,serif}label[_ngcontent-%COMP%]{display:block;margin-top:18px;margin-bottom:7px;font-weight:600;color:#444;-webkit-user-select:none;user-select:none;font-size:1rem}input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;height:36px;border:1.5px solid #ccc;border-radius:7px;font-size:.95rem;transition:border-color .3s ease,box-shadow .3s ease;box-sizing:border-box;font-family:Roboto,sans-serif}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px 2px #007bff44;background-color:#f9fbff}.error-msg[_ngcontent-%COMP%]{color:#d93025;margin-top:5px;font-size:.85rem;font-weight:500;font-style:italic;-webkit-user-select:none;user-select:none;font-family:Roboto,sans-serif}button[_ngcontent-%COMP%]{margin-top:30px;width:100%;background-color:#007bff;border:none;color:#fff;font-size:1.1rem;padding:12px 0;border-radius:8px;cursor:pointer;font-weight:700;letter-spacing:.05em;transition:background-color .3s ease,transform .2s ease;-webkit-user-select:none;user-select:none;font-family:Roboto,sans-serif}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:scale(1.03)}button[_ngcontent-%COMP%]:disabled{background-color:#a0c4ff;cursor:not-allowed;transform:none}"]})};function Va(s,e){s&1&&(w(0,"small"),T(1,"El correo es obligatorio."),v())}function Da(s,e){s&1&&(w(0,"small"),T(1,"Correo inv\xE1lido."),v())}function Na(s,e){if(s&1&&(w(0,"div",4),C(1,Va,2,0,"small",5)(2,Da,2,0,"small",5),v()),s&2){let r,a,h=q();b(),S("ngIf",(r=h.form.get("email"))==null||r.errors==null?null:r.errors.required),b(),S("ngIf",(a=h.form.get("email"))==null||a.errors==null?null:a.errors.email)}}var hn=class s{constructor(e,r,a){this.fb=e;this.auth=r;this.router=a}form;ngOnInit(){this.form=this.fb.group({email:["",[k.required,k.email]]})}sendResetEmail(){let e=this.form.get("email")?.value;e&&this.auth.resetPassword(e).then(()=>{alert("Correo de recuperaci\xF3n enviado"),this.router.navigate(["/"])}).catch(r=>{console.error("Error al enviar correo:",r),alert("Hubo un error al enviar el correo.")})}static \u0275fac=function(r){return new(r||s)(R(vt),R(wt),R(Ye))};static \u0275cmp=Y({type:s,selectors:[["app-reset-password"]],decls:7,vars:3,consts:[[1,"reset-form",3,"ngSubmit","formGroup"],["type","email","formControlName","email","placeholder","Ingresa tu correo",1,"input-field"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","primary-btn",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(r,a){if(r&1&&(w(0,"h2"),T(1,"Recuperar Contrase\xF1a"),v(),w(2,"form",0),J("ngSubmit",function(){return a.sendResetEmail()}),O(3,"input",1),C(4,Na,3,2,"div",2),w(5,"button",3),T(6,"Enviar correo"),v()()),r&2){let h;b(2),S("formGroup",a.form),b(2),S("ngIf",((h=a.form.get("email"))==null?null:h.invalid)&&((h=a.form.get("email"))==null?null:h.touched)),b(),S("disabled",a.form.invalid)}},dependencies:[X,nt,at,gt,ft,mt,pt,_t,yt],styles:[".reset-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-width:400px;margin:0 auto}.input-field[_ngcontent-%COMP%]{padding:10px;font-size:16px}.btn[_ngcontent-%COMP%]{padding:10px;font-size:16px;cursor:pointer}.error-message[_ngcontent-%COMP%]{color:red;font-size:13px}"]})};var Is=[{path:"",component:en},{path:"register",component:ln},{path:"reset-password",component:hn},{path:"admin",loadChildren:()=>import("./chunk-OSAALL46.js").then(s=>s.AdminRoutingModule)},{path:"paciente",component:sn,children:[{path:"perfil",component:on},{path:"solicitar-cita",component:cn},{path:"mis-citas",component:un},{path:"",redirectTo:"perfil",pathMatch:"full"}]}];var Es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ts={};var dn,bs;(function(){var s;function e(p,c){function l(){}l.prototype=c.prototype,p.D=c.prototype,p.prototype=new l,p.prototype.constructor=p,p.C=function(d,f,g){for(var u=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)u[Tt-2]=arguments[Tt];return c.prototype[f].apply(d,u)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(p,c,l){l||(l=0);var d=Array(16);if(typeof c=="string")for(var f=0;16>f;++f)d[f]=c.charCodeAt(l++)|c.charCodeAt(l++)<<8|c.charCodeAt(l++)<<16|c.charCodeAt(l++)<<24;else for(f=0;16>f;++f)d[f]=c[l++]|c[l++]<<8|c[l++]<<16|c[l++]<<24;c=p.g[0],l=p.g[1],f=p.g[2];var g=p.g[3],u=c+(g^l&(f^g))+d[0]+3614090360&4294967295;c=l+(u<<7&4294967295|u>>>25),u=g+(f^c&(l^f))+d[1]+3905402710&4294967295,g=c+(u<<12&4294967295|u>>>20),u=f+(l^g&(c^l))+d[2]+606105819&4294967295,f=g+(u<<17&4294967295|u>>>15),u=l+(c^f&(g^c))+d[3]+3250441966&4294967295,l=f+(u<<22&4294967295|u>>>10),u=c+(g^l&(f^g))+d[4]+4118548399&4294967295,c=l+(u<<7&4294967295|u>>>25),u=g+(f^c&(l^f))+d[5]+1200080426&4294967295,g=c+(u<<12&4294967295|u>>>20),u=f+(l^g&(c^l))+d[6]+2821735955&4294967295,f=g+(u<<17&4294967295|u>>>15),u=l+(c^f&(g^c))+d[7]+4249261313&4294967295,l=f+(u<<22&4294967295|u>>>10),u=c+(g^l&(f^g))+d[8]+1770035416&4294967295,c=l+(u<<7&4294967295|u>>>25),u=g+(f^c&(l^f))+d[9]+2336552879&4294967295,g=c+(u<<12&4294967295|u>>>20),u=f+(l^g&(c^l))+d[10]+4294925233&4294967295,f=g+(u<<17&4294967295|u>>>15),u=l+(c^f&(g^c))+d[11]+2304563134&4294967295,l=f+(u<<22&4294967295|u>>>10),u=c+(g^l&(f^g))+d[12]+1804603682&4294967295,c=l+(u<<7&4294967295|u>>>25),u=g+(f^c&(l^f))+d[13]+4254626195&4294967295,g=c+(u<<12&4294967295|u>>>20),u=f+(l^g&(c^l))+d[14]+2792965006&4294967295,f=g+(u<<17&4294967295|u>>>15),u=l+(c^f&(g^c))+d[15]+1236535329&4294967295,l=f+(u<<22&4294967295|u>>>10),u=c+(f^g&(l^f))+d[1]+4129170786&4294967295,c=l+(u<<5&4294967295|u>>>27),u=g+(l^f&(c^l))+d[6]+3225465664&4294967295,g=c+(u<<9&4294967295|u>>>23),u=f+(c^l&(g^c))+d[11]+643717713&4294967295,f=g+(u<<14&4294967295|u>>>18),u=l+(g^c&(f^g))+d[0]+3921069994&4294967295,l=f+(u<<20&4294967295|u>>>12),u=c+(f^g&(l^f))+d[5]+3593408605&4294967295,c=l+(u<<5&4294967295|u>>>27),u=g+(l^f&(c^l))+d[10]+38016083&4294967295,g=c+(u<<9&4294967295|u>>>23),u=f+(c^l&(g^c))+d[15]+3634488961&4294967295,f=g+(u<<14&4294967295|u>>>18),u=l+(g^c&(f^g))+d[4]+3889429448&4294967295,l=f+(u<<20&4294967295|u>>>12),u=c+(f^g&(l^f))+d[9]+568446438&4294967295,c=l+(u<<5&4294967295|u>>>27),u=g+(l^f&(c^l))+d[14]+3275163606&4294967295,g=c+(u<<9&4294967295|u>>>23),u=f+(c^l&(g^c))+d[3]+4107603335&4294967295,f=g+(u<<14&4294967295|u>>>18),u=l+(g^c&(f^g))+d[8]+1163531501&4294967295,l=f+(u<<20&4294967295|u>>>12),u=c+(f^g&(l^f))+d[13]+2850285829&4294967295,c=l+(u<<5&4294967295|u>>>27),u=g+(l^f&(c^l))+d[2]+4243563512&4294967295,g=c+(u<<9&4294967295|u>>>23),u=f+(c^l&(g^c))+d[7]+1735328473&4294967295,f=g+(u<<14&4294967295|u>>>18),u=l+(g^c&(f^g))+d[12]+2368359562&4294967295,l=f+(u<<20&4294967295|u>>>12),u=c+(l^f^g)+d[5]+4294588738&4294967295,c=l+(u<<4&4294967295|u>>>28),u=g+(c^l^f)+d[8]+2272392833&4294967295,g=c+(u<<11&4294967295|u>>>21),u=f+(g^c^l)+d[11]+1839030562&4294967295,f=g+(u<<16&4294967295|u>>>16),u=l+(f^g^c)+d[14]+4259657740&4294967295,l=f+(u<<23&4294967295|u>>>9),u=c+(l^f^g)+d[1]+2763975236&4294967295,c=l+(u<<4&4294967295|u>>>28),u=g+(c^l^f)+d[4]+1272893353&4294967295,g=c+(u<<11&4294967295|u>>>21),u=f+(g^c^l)+d[7]+4139469664&4294967295,f=g+(u<<16&4294967295|u>>>16),u=l+(f^g^c)+d[10]+3200236656&4294967295,l=f+(u<<23&4294967295|u>>>9),u=c+(l^f^g)+d[13]+681279174&4294967295,c=l+(u<<4&4294967295|u>>>28),u=g+(c^l^f)+d[0]+3936430074&4294967295,g=c+(u<<11&4294967295|u>>>21),u=f+(g^c^l)+d[3]+3572445317&4294967295,f=g+(u<<16&4294967295|u>>>16),u=l+(f^g^c)+d[6]+76029189&4294967295,l=f+(u<<23&4294967295|u>>>9),u=c+(l^f^g)+d[9]+3654602809&4294967295,c=l+(u<<4&4294967295|u>>>28),u=g+(c^l^f)+d[12]+3873151461&4294967295,g=c+(u<<11&4294967295|u>>>21),u=f+(g^c^l)+d[15]+530742520&4294967295,f=g+(u<<16&4294967295|u>>>16),u=l+(f^g^c)+d[2]+3299628645&4294967295,l=f+(u<<23&4294967295|u>>>9),u=c+(f^(l|~g))+d[0]+4096336452&4294967295,c=l+(u<<6&4294967295|u>>>26),u=g+(l^(c|~f))+d[7]+1126891415&4294967295,g=c+(u<<10&4294967295|u>>>22),u=f+(c^(g|~l))+d[14]+2878612391&4294967295,f=g+(u<<15&4294967295|u>>>17),u=l+(g^(f|~c))+d[5]+4237533241&4294967295,l=f+(u<<21&4294967295|u>>>11),u=c+(f^(l|~g))+d[12]+1700485571&4294967295,c=l+(u<<6&4294967295|u>>>26),u=g+(l^(c|~f))+d[3]+2399980690&4294967295,g=c+(u<<10&4294967295|u>>>22),u=f+(c^(g|~l))+d[10]+4293915773&4294967295,f=g+(u<<15&4294967295|u>>>17),u=l+(g^(f|~c))+d[1]+2240044497&4294967295,l=f+(u<<21&4294967295|u>>>11),u=c+(f^(l|~g))+d[8]+1873313359&4294967295,c=l+(u<<6&4294967295|u>>>26),u=g+(l^(c|~f))+d[15]+4264355552&4294967295,g=c+(u<<10&4294967295|u>>>22),u=f+(c^(g|~l))+d[6]+2734768916&4294967295,f=g+(u<<15&4294967295|u>>>17),u=l+(g^(f|~c))+d[13]+1309151649&4294967295,l=f+(u<<21&4294967295|u>>>11),u=c+(f^(l|~g))+d[4]+4149444226&4294967295,c=l+(u<<6&4294967295|u>>>26),u=g+(l^(c|~f))+d[11]+3174756917&4294967295,g=c+(u<<10&4294967295|u>>>22),u=f+(c^(g|~l))+d[2]+718787259&4294967295,f=g+(u<<15&4294967295|u>>>17),u=l+(g^(f|~c))+d[9]+3951481745&4294967295,p.g[0]=p.g[0]+c&4294967295,p.g[1]=p.g[1]+(f+(u<<21&4294967295|u>>>11))&4294967295,p.g[2]=p.g[2]+f&4294967295,p.g[3]=p.g[3]+g&4294967295}a.prototype.u=function(p,c){c===void 0&&(c=p.length);for(var l=c-this.blockSize,d=this.B,f=this.h,g=0;g<c;){if(f==0)for(;g<=l;)h(this,p,g),g+=this.blockSize;if(typeof p=="string"){for(;g<c;)if(d[f++]=p.charCodeAt(g++),f==this.blockSize){h(this,d),f=0;break}}else for(;g<c;)if(d[f++]=p[g++],f==this.blockSize){h(this,d),f=0;break}}this.h=f,this.o+=c},a.prototype.v=function(){var p=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);p[0]=128;for(var c=1;c<p.length-8;++c)p[c]=0;var l=8*this.o;for(c=p.length-8;c<p.length;++c)p[c]=l&255,l/=256;for(this.u(p),p=Array(16),c=l=0;4>c;++c)for(var d=0;32>d;d+=8)p[l++]=this.g[c]>>>d&255;return p};function y(p,c){var l=A;return Object.prototype.hasOwnProperty.call(l,p)?l[p]:l[p]=c(p)}function E(p,c){this.h=c;for(var l=[],d=!0,f=p.length-1;0<=f;f--){var g=p[f]|0;d&&g==c||(l[f]=g,d=!1)}this.g=l}var A={};function V(p){return-128<=p&&128>p?y(p,function(c){return new E([c|0],0>c?-1:0)}):new E([p|0],0>p?-1:0)}function F(p){if(isNaN(p)||!isFinite(p))return st;if(0>p)return U(F(-p));for(var c=[],l=1,d=0;p>=l;d++)c[d]=p/l|0,l*=4294967296;return new E(c,0)}function lt(p,c){if(p.length==0)throw Error("number format error: empty string");if(c=c||10,2>c||36<c)throw Error("radix out of range: "+c);if(p.charAt(0)=="-")return U(lt(p.substring(1),c));if(0<=p.indexOf("-"))throw Error('number format error: interior "-" character');for(var l=F(Math.pow(c,8)),d=st,f=0;f<p.length;f+=8){var g=Math.min(8,p.length-f),u=parseInt(p.substring(f,f+g),c);8>g?(g=F(Math.pow(c,g)),d=d.j(g).add(F(u))):(d=d.j(l),d=d.add(F(u)))}return d}var st=V(0),B=V(1),Ot=V(16777216);s=E.prototype,s.m=function(){if($(this))return-U(this).m();for(var p=0,c=1,l=0;l<this.g.length;l++){var d=this.i(l);p+=(0<=d?d:4294967296+d)*c,c*=4294967296}return p},s.toString=function(p){if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(N(this))return"0";if($(this))return"-"+U(this).toString(p);for(var c=F(Math.pow(p,6)),l=this,d="";;){var f=Pt(l,c).g;l=$t(l,f.j(c));var g=((0<l.g.length?l.g[0]:l.h)>>>0).toString(p);if(l=f,N(l))return g+d;for(;6>g.length;)g="0"+g;d=g+d}},s.i=function(p){return 0>p?0:p<this.g.length?this.g[p]:this.h};function N(p){if(p.h!=0)return!1;for(var c=0;c<p.g.length;c++)if(p.g[c]!=0)return!1;return!0}function $(p){return p.h==-1}s.l=function(p){return p=$t(this,p),$(p)?-1:N(p)?0:1};function U(p){for(var c=p.g.length,l=[],d=0;d<c;d++)l[d]=~p.g[d];return new E(l,~p.h).add(B)}s.abs=function(){return $(this)?U(this):this},s.add=function(p){for(var c=Math.max(this.g.length,p.g.length),l=[],d=0,f=0;f<=c;f++){var g=d+(this.i(f)&65535)+(p.i(f)&65535),u=(g>>>16)+(this.i(f)>>>16)+(p.i(f)>>>16);d=u>>>16,g&=65535,u&=65535,l[f]=u<<16|g}return new E(l,l[l.length-1]&-2147483648?-1:0)};function $t(p,c){return p.add(U(c))}s.j=function(p){if(N(this)||N(p))return st;if($(this))return $(p)?U(this).j(U(p)):U(U(this).j(p));if($(p))return U(this.j(U(p)));if(0>this.l(Ot)&&0>p.l(Ot))return F(this.m()*p.m());for(var c=this.g.length+p.g.length,l=[],d=0;d<2*c;d++)l[d]=0;for(d=0;d<this.g.length;d++)for(var f=0;f<p.g.length;f++){var g=this.i(d)>>>16,u=this.i(d)&65535,Tt=p.i(f)>>>16,re=p.i(f)&65535;l[2*d+2*f]+=u*re,ht(l,2*d+2*f),l[2*d+2*f+1]+=g*re,ht(l,2*d+2*f+1),l[2*d+2*f+1]+=u*Tt,ht(l,2*d+2*f+1),l[2*d+2*f+2]+=g*Tt,ht(l,2*d+2*f+2)}for(d=0;d<c;d++)l[d]=l[2*d+1]<<16|l[2*d];for(d=c;d<2*c;d++)l[d]=0;return new E(l,0)};function ht(p,c){for(;(p[c]&65535)!=p[c];)p[c+1]+=p[c]>>>16,p[c]&=65535,c++}function ot(p,c){this.g=p,this.h=c}function Pt(p,c){if(N(c))throw Error("division by zero");if(N(p))return new ot(st,st);if($(p))return c=Pt(U(p),c),new ot(U(c.g),U(c.h));if($(c))return c=Pt(p,U(c)),new ot(U(c.g),c.h);if(30<p.g.length){if($(p)||$(c))throw Error("slowDivide_ only works with positive integers.");for(var l=B,d=c;0>=d.l(p);)l=xe(l),d=xe(d);var f=dt(l,1),g=dt(d,1);for(d=dt(d,2),l=dt(l,2);!N(d);){var u=g.add(d);0>=u.l(p)&&(f=f.add(l),g=u),d=dt(d,1),l=dt(l,1)}return c=$t(p,f.j(c)),new ot(f,c)}for(f=st;0<=p.l(c);){for(l=Math.max(1,Math.floor(p.m()/c.m())),d=Math.ceil(Math.log(l)/Math.LN2),d=48>=d?1:Math.pow(2,d-48),g=F(l),u=g.j(c);$(u)||0<u.l(p);)l-=d,g=F(l),u=g.j(c);N(g)&&(g=B),f=f.add(g),p=$t(p,u)}return new ot(f,p)}s.A=function(p){return Pt(this,p).h},s.and=function(p){for(var c=Math.max(this.g.length,p.g.length),l=[],d=0;d<c;d++)l[d]=this.i(d)&p.i(d);return new E(l,this.h&p.h)},s.or=function(p){for(var c=Math.max(this.g.length,p.g.length),l=[],d=0;d<c;d++)l[d]=this.i(d)|p.i(d);return new E(l,this.h|p.h)},s.xor=function(p){for(var c=Math.max(this.g.length,p.g.length),l=[],d=0;d<c;d++)l[d]=this.i(d)^p.i(d);return new E(l,this.h^p.h)};function xe(p){for(var c=p.g.length+1,l=[],d=0;d<c;d++)l[d]=p.i(d)<<1|p.i(d-1)>>>31;return new E(l,p.h)}function dt(p,c){var l=c>>5;c%=32;for(var d=p.g.length-l,f=[],g=0;g<d;g++)f[g]=0<c?p.i(g+l)>>>c|p.i(g+l+1)<<32-c:p.i(g+l);return new E(f,p.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,bs=Ts.Md5=a,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.A,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=F,E.fromString=lt,dn=Ts.Integer=E}).apply(typeof Es<"u"?Es:typeof self<"u"?self:typeof window<"u"?window:{});var fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ct={};var As,ka,Ss,Cs,Ps,xs,Rs,Vs,Ds;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,n,i){return t==Array.prototype||t==Object.prototype||(t[n]=i.value),t};function r(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof fn=="object"&&fn];for(var n=0;n<t.length;++n){var i=t[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}var a=r(this);function h(t,n){if(n)t:{var i=a;t=t.split(".");for(var o=0;o<t.length-1;o++){var m=t[o];if(!(m in i))break t;i=i[m]}t=t[t.length-1],o=i[t],n=n(o),n!=o&&n!=null&&e(i,t,{configurable:!0,writable:!0,value:n})}}function y(t,n){t instanceof String&&(t+="");var i=0,o=!1,m={next:function(){if(!o&&i<t.length){var _=i++;return{value:n(_,t[_]),done:!1}}return o=!0,{done:!0,value:void 0}}};return m[Symbol.iterator]=function(){return m},m}h("Array.prototype.values",function(t){return t||function(){return y(this,function(n,i){return i})}});var E=E||{},A=this||self;function V(t){var n=typeof t;return n=n!="object"?n:t?Array.isArray(t)?"array":n:"null",n=="array"||n=="object"&&typeof t.length=="number"}function F(t){var n=typeof t;return n=="object"&&t!=null||n=="function"}function lt(t,n,i){return t.call.apply(t.bind,arguments)}function st(t,n,i){if(!t)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(m,o),t.apply(n,m)}}return function(){return t.apply(n,arguments)}}function B(t,n,i){return B=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?lt:st,B.apply(null,arguments)}function Ot(t,n){var i=Array.prototype.slice.call(arguments,1);return function(){var o=i.slice();return o.push.apply(o,arguments),t.apply(this,o)}}function N(t,n){function i(){}i.prototype=n.prototype,t.aa=n.prototype,t.prototype=new i,t.prototype.constructor=t,t.Qb=function(o,m,_){for(var I=Array(arguments.length-2),D=2;D<arguments.length;D++)I[D-2]=arguments[D];return n.prototype[m].apply(o,I)}}function $(t){let n=t.length;if(0<n){let i=Array(n);for(let o=0;o<n;o++)i[o]=t[o];return i}return[]}function U(t,n){for(let i=1;i<arguments.length;i++){let o=arguments[i];if(V(o)){let m=t.length||0,_=o.length||0;t.length=m+_;for(let I=0;I<_;I++)t[m+I]=o[I]}else t.push(o)}}class $t{constructor(n,i){this.i=n,this.j=i,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}function ht(t){return/^[\s\xa0]*$/.test(t)}function ot(){var t=A.navigator;return t&&(t=t.userAgent)?t:""}function Pt(t){return Pt[" "](t),t}Pt[" "]=function(){};var xe=ot().indexOf("Gecko")!=-1&&!(ot().toLowerCase().indexOf("webkit")!=-1&&ot().indexOf("Edge")==-1)&&!(ot().indexOf("Trident")!=-1||ot().indexOf("MSIE")!=-1)&&ot().indexOf("Edge")==-1;function dt(t,n,i){for(let o in t)n.call(i,t[o],o,t)}function p(t,n){for(let i in t)n.call(void 0,t[i],i,t)}function c(t){let n={};for(let i in t)n[i]=t[i];return n}let l="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function d(t,n){let i,o;for(let m=1;m<arguments.length;m++){o=arguments[m];for(i in o)t[i]=o[i];for(let _=0;_<l.length;_++)i=l[_],Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}}function f(t){var n=1;t=t.split(":");let i=[];for(;0<n&&t.length;)i.push(t.shift()),n--;return t.length&&i.push(t.join(":")),i}function g(t){A.setTimeout(()=>{throw t},0)}function u(){var t=En;let n=null;return t.g&&(n=t.g,t.g=t.g.next,t.g||(t.h=null),n.next=null),n}class Tt{constructor(){this.h=this.g=null}add(n,i){let o=re.get();o.set(n,i),this.h?this.h.next=o:this.g=o,this.h=o}}var re=new $t(()=>new po,t=>t.reset());class po{constructor(){this.next=this.g=this.h=null}set(n,i){this.h=n,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,se=!1,En=new Tt,dr=()=>{let t=A.Promise.resolve(void 0);ie=()=>{t.then(go)}};var go=()=>{for(var t;t=u();){try{t.h.call(t.g)}catch(i){g(i)}var n=re;n.j(t),100>n.h&&(n.h++,t.next=n.g,n.g=t)}se=!1};function xt(){this.s=this.s,this.C=this.C}xt.prototype.s=!1,xt.prototype.ma=function(){this.s||(this.s=!0,this.N())},xt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(t,n){this.type=t,this.g=this.target=n,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var _o=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let i=()=>{};A.addEventListener("test",i,n),A.removeEventListener("test",i,n)}catch{}return t}();function oe(t,n){if(K.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,o=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=n,n=t.relatedTarget){if(xe){t:{try{Pt(n.nodeName);var m=!0;break t}catch{}m=!1}m||(n=null)}}else i=="mouseover"?n=t.fromElement:i=="mouseout"&&(n=t.toElement);this.relatedTarget=n,o?(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yo[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&oe.aa.h.call(this)}}N(oe,K);var yo={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),vo=0;function wo(t,n,i,o,m){this.listener=t,this.proxy=null,this.src=n,this.type=i,this.capture=!!o,this.ha=m,this.key=++vo,this.da=this.fa=!1}function Re(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Ve(t){this.src=t,this.g={},this.h=0}Ve.prototype.add=function(t,n,i,o,m){var _=t.toString();t=this.g[_],t||(t=this.g[_]=[],this.h++);var I=bn(t,n,o,m);return-1<I?(n=t[I],i||(n.fa=!1)):(n=new wo(n,this.src,_,!!o,m),n.fa=i,t.push(n)),n};function Tn(t,n){var i=n.type;if(i in t.g){var o=t.g[i],m=Array.prototype.indexOf.call(o,n,void 0),_;(_=0<=m)&&Array.prototype.splice.call(o,m,1),_&&(Re(n),t.g[i].length==0&&(delete t.g[i],t.h--))}}function bn(t,n,i,o){for(var m=0;m<t.length;++m){var _=t[m];if(!_.da&&_.listener==n&&_.capture==!!i&&_.ha==o)return m}return-1}var An="closure_lm_"+(1e6*Math.random()|0),Sn={};function fr(t,n,i,o,m){if(o&&o.once)return pr(t,n,i,o,m);if(Array.isArray(n)){for(var _=0;_<n.length;_++)fr(t,n[_],i,o,m);return null}return i=Rn(i),t&&t[ae]?t.K(n,i,F(o)?!!o.capture:!!o,m):mr(t,n,i,!1,o,m)}function mr(t,n,i,o,m,_){if(!n)throw Error("Invalid event type");var I=F(m)?!!m.capture:!!m,D=Pn(t);if(D||(t[An]=D=new Ve(t)),i=D.add(n,i,o,I,_),i.proxy)return i;if(o=Io(),i.proxy=o,o.src=t,o.listener=i,t.addEventListener)_o||(m=I),m===void 0&&(m=!1),t.addEventListener(n.toString(),o,m);else if(t.attachEvent)t.attachEvent(_r(n.toString()),o);else if(t.addListener&&t.removeListener)t.addListener(o);else throw Error("addEventListener and attachEvent are unavailable.");return i}function Io(){function t(i){return n.call(t.src,t.listener,i)}let n=Eo;return t}function pr(t,n,i,o,m){if(Array.isArray(n)){for(var _=0;_<n.length;_++)pr(t,n[_],i,o,m);return null}return i=Rn(i),t&&t[ae]?t.L(n,i,F(o)?!!o.capture:!!o,m):mr(t,n,i,!0,o,m)}function gr(t,n,i,o,m){if(Array.isArray(n))for(var _=0;_<n.length;_++)gr(t,n[_],i,o,m);else o=F(o)?!!o.capture:!!o,i=Rn(i),t&&t[ae]?(t=t.i,n=String(n).toString(),n in t.g&&(_=t.g[n],i=bn(_,i,o,m),-1<i&&(Re(_[i]),Array.prototype.splice.call(_,i,1),_.length==0&&(delete t.g[n],t.h--)))):t&&(t=Pn(t))&&(n=t.g[n.toString()],t=-1,n&&(t=bn(n,i,o,m)),(i=-1<t?n[t]:null)&&Cn(i))}function Cn(t){if(typeof t!="number"&&t&&!t.da){var n=t.src;if(n&&n[ae])Tn(n.i,t);else{var i=t.type,o=t.proxy;n.removeEventListener?n.removeEventListener(i,o,t.capture):n.detachEvent?n.detachEvent(_r(i),o):n.addListener&&n.removeListener&&n.removeListener(o),(i=Pn(n))?(Tn(i,t),i.h==0&&(i.src=null,n[An]=null)):Re(t)}}}function _r(t){return t in Sn?Sn[t]:Sn[t]="on"+t}function Eo(t,n){if(t.da)t=!0;else{n=new oe(n,this);var i=t.listener,o=t.ha||t.src;t.fa&&Cn(t),t=i.call(o,n)}return t}function Pn(t){return t=t[An],t instanceof Ve?t:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rn(t){return typeof t=="function"?t:(t[xn]||(t[xn]=function(n){return t.handleEvent(n)}),t[xn])}function Q(){xt.call(this),this.i=new Ve(this),this.M=this,this.F=null}N(Q,xt),Q.prototype[ae]=!0,Q.prototype.removeEventListener=function(t,n,i,o){gr(this,t,n,i,o)};function Z(t,n){var i,o=t.F;if(o)for(i=[];o;o=o.F)i.push(o);if(t=t.M,o=n.type||n,typeof n=="string")n=new K(n,t);else if(n instanceof K)n.target=n.target||t;else{var m=n;n=new K(o,t),d(n,m)}if(m=!0,i)for(var _=i.length-1;0<=_;_--){var I=n.g=i[_];m=De(I,o,!0,n)&&m}if(I=n.g=t,m=De(I,o,!0,n)&&m,m=De(I,o,!1,n)&&m,i)for(_=0;_<i.length;_++)I=n.g=i[_],m=De(I,o,!1,n)&&m}Q.prototype.N=function(){if(Q.aa.N.call(this),this.i){var t=this.i,n;for(n in t.g){for(var i=t.g[n],o=0;o<i.length;o++)Re(i[o]);delete t.g[n],t.h--}}this.F=null},Q.prototype.K=function(t,n,i,o){return this.i.add(String(t),n,!1,i,o)},Q.prototype.L=function(t,n,i,o){return this.i.add(String(t),n,!0,i,o)};function De(t,n,i,o){if(n=t.i.g[String(n)],!n)return!0;n=n.concat();for(var m=!0,_=0;_<n.length;++_){var I=n[_];if(I&&!I.da&&I.capture==i){var D=I.listener,z=I.ha||I.src;I.fa&&Tn(t.i,I),m=D.call(z,o)!==!1&&m}}return m&&!o.defaultPrevented}function yr(t,n,i){if(typeof t=="function")i&&(t=B(t,i));else if(t&&typeof t.handleEvent=="function")t=B(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(n)?-1:A.setTimeout(t,n||0)}function vr(t){t.g=yr(()=>{t.g=null,t.i&&(t.i=!1,vr(t))},t.l);let n=t.h;t.h=null,t.m.apply(null,n)}class To extends xt{constructor(n,i){super(),this.m=n,this.l=i,this.h=null,this.i=!1,this.g=null}j(n){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(t){xt.call(this),this.h=t,this.g={}}N(ce,xt);var wr=[];function Ir(t){dt(t.g,function(n,i){this.g.hasOwnProperty(i)&&Cn(n)},t),t.g={}}ce.prototype.N=function(){ce.aa.N.call(this),Ir(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=A.JSON.stringify,bo=A.JSON.parse,Ao=class{stringify(t){return A.JSON.stringify(t,void 0)}parse(t){return A.JSON.parse(t,void 0)}};function Dn(){}Dn.prototype.h=null;function Er(t){return t.h||(t.h=t.i())}function Tr(){}var ue={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){K.call(this,"d")}N(Nn,K);function kn(){K.call(this,"c")}N(kn,K);var Ft={},br=null;function Ne(){return br=br||new Q}Ft.La="serverreachability";function Ar(t){K.call(this,Ft.La,t)}N(Ar,K);function le(t){let n=Ne();Z(n,new Ar(n))}Ft.STAT_EVENT="statevent";function Sr(t,n){K.call(this,Ft.STAT_EVENT,t),this.stat=n}N(Sr,K);function tt(t){let n=Ne();Z(n,new Sr(n,t))}Ft.Ma="timingevent";function Cr(t,n){K.call(this,Ft.Ma,t),this.size=n}N(Cr,K);function he(t,n){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){t()},n)}function de(){this.g=!0}de.prototype.xa=function(){this.g=!1};function So(t,n,i,o,m,_){t.info(function(){if(t.g)if(_)for(var I="",D=_.split("&"),z=0;z<D.length;z++){var x=D[z].split("=");if(1<x.length){var W=x[0];x=x[1];var H=W.split("_");I=2<=H.length&&H[1]=="type"?I+(W+"="+x+"&"):I+(W+"=redacted&")}}else I=null;else I=_;return"XMLHTTP REQ ("+o+") [attempt "+m+"]: "+n+`
`+i+`
`+I})}function Co(t,n,i,o,m,_,I){t.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+m+"]: "+n+`
`+i+`
`+_+" "+I})}function Kt(t,n,i,o){t.info(function(){return"XMLHTTP TEXT ("+n+"): "+xo(t,i)+(o?" "+o:"")})}function Po(t,n){t.info(function(){return"TIMEOUT: "+n})}de.prototype.info=function(){};function xo(t,n){if(!t.g)return n;if(!n)return null;try{var i=JSON.parse(n);if(i){for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var o=i[t];if(!(2>o.length)){var m=o[1];if(Array.isArray(m)&&!(1>m.length)){var _=m[0];if(_!="noop"&&_!="stop"&&_!="close")for(var I=1;I<m.length;I++)m[I]=""}}}}return Vn(i)}catch{return n}}var ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mn;function Me(){}N(Me,Dn),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Mn=new Me;function Rt(t,n,i,o){this.j=t,this.i=n,this.l=i,this.R=o||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var Rr={},On={};function Fn(t,n,i){t.L=1,t.v=qe(bt(n)),t.m=i,t.P=!0,Vr(t,null)}function Vr(t,n){t.F=Date.now(),Oe(t),t.A=bt(t.v);var i=t.A,o=t.R;Array.isArray(o)||(o=[String(o)]),$r(i.i,"t",o),t.C=0,i=t.j.J,t.h=new xr,t.g=ui(t.j,i?n:null,!t.m),0<t.O&&(t.M=new To(B(t.Y,t,t.g),t.O)),n=t.U,i=t.g,o=t.ca;var m="readystatechange";Array.isArray(m)||(m&&(wr[0]=m.toString()),m=wr);for(var _=0;_<m.length;_++){var I=fr(i,m[_],o||n.handleEvent,!1,n.h||n);if(!I)break;n.g[I.key]=I}n=t.H?c(t.H):{},t.m?(t.u||(t.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,n)):(t.u="GET",t.g.ea(t.A,t.u,null,n)),le(),So(t.i,t.u,t.A,t.l,t.R,t.m)}Rt.prototype.ca=function(t){t=t.target;let n=this.M;n&&At(t)==3?n.j():this.Y(t)},Rt.prototype.Y=function(t){try{if(t==this.g)t:{let H=At(this.g);var n=this.g.Ba();let Ht=this.g.Z();if(!(3>H)&&(H!=3||this.g&&(this.h.h||this.g.oa()||Xr(this.g)))){this.J||H!=4||n==7||(n==8||0>=Ht?le(3):le(2)),Ln(this);var i=this.g.Z();this.X=i;e:if(Dr(this)){var o=Xr(this.g);t="";var m=o.length,_=At(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lt(this),fe(this);var I="";break e}this.h.i=new A.TextDecoder}for(n=0;n<m;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:!(_&&n==m-1)});o.length=0,this.h.g+=t,this.C=0,I=this.h.g}else I=this.g.oa();if(this.o=i==200,Co(this.i,this.u,this.A,this.l,this.R,H,i),this.o){if(this.T&&!this.K){e:{if(this.g){var D,z=this.g;if((D=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ht(D)){var x=D;break e}}x=null}if(i=x)Kt(this.i,this.l,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qn(this,i);else{this.o=!1,this.s=3,tt(12),Lt(this),fe(this);break t}}if(this.P){i=!0;let ct;for(;!this.J&&this.C<I.length;)if(ct=Ro(this,I),ct==On){H==4&&(this.s=4,tt(14),i=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Rr){this.s=4,tt(15),Kt(this.i,this.l,I,"[Invalid Chunk]"),i=!1;break}else Kt(this.i,this.l,ct,null),qn(this,ct);if(Dr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),H!=4||I.length!=0||this.h.h||(this.s=1,tt(16),i=!1),this.o=this.o&&i,!i)Kt(this.i,this.l,I,"[Invalid Chunked Response]"),Lt(this),fe(this);else if(0<I.length&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.ba&&!W.M&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),$n(W),W.M=!0,tt(11))}}else Kt(this.i,this.l,I,null),qn(this,I);H==4&&Lt(this),this.o&&!this.J&&(H==4?si(this.j,this):(this.o=!1,Oe(this)))}else Qo(this.g),i==400&&0<I.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),Lt(this),fe(this)}}}catch{}finally{}};function Dr(t){return t.g?t.u=="GET"&&t.L!=2&&t.j.Ca:!1}function Ro(t,n){var i=t.C,o=n.indexOf(`
`,i);return o==-1?On:(i=Number(n.substring(i,o)),isNaN(i)?Rr:(o+=1,o+i>n.length?On:(n=n.slice(o,o+i),t.C=o+i,n)))}Rt.prototype.cancel=function(){this.J=!0,Lt(this)};function Oe(t){t.S=Date.now()+t.I,Nr(t,t.I)}function Nr(t,n){if(t.B!=null)throw Error("WatchDog timer not null");t.B=he(B(t.ba,t),n)}function Ln(t){t.B&&(A.clearTimeout(t.B),t.B=null)}Rt.prototype.ba=function(){this.B=null;let t=Date.now();0<=t-this.S?(Po(this.i,this.A),this.L!=2&&(le(),tt(17)),Lt(this),this.s=2,fe(this)):Nr(this,this.S-t)};function fe(t){t.j.G==0||t.J||si(t.j,t)}function Lt(t){Ln(t);var n=t.M;n&&typeof n.ma=="function"&&n.ma(),t.M=null,Ir(t.U),t.g&&(n=t.g,t.g=null,n.abort(),n.ma())}function qn(t,n){try{var i=t.j;if(i.G!=0&&(i.g==t||Bn(i.h,t))){if(!t.K&&Bn(i.h,t)&&i.G==3){try{var o=i.Da.g.parse(n)}catch{o=null}if(Array.isArray(o)&&o.length==3){var m=o;if(m[0]==0){t:if(!i.u){if(i.g)if(i.g.F+3e3<t.F)Ge(i),ze(i);else break t;Gn(i),tt(18)}}else i.za=m[1],0<i.za-i.T&&37500>m[2]&&i.F&&i.v==0&&!i.C&&(i.C=he(B(i.Za,i),6e3));if(1>=Or(i.h)&&i.ca){try{i.ca()}catch{}i.ca=void 0}}else Bt(i,11)}else if((t.K||i.g==t)&&Ge(i),!ht(n))for(m=i.Da.g.parse(n),n=0;n<m.length;n++){let x=m[n];if(i.T=x[0],x=x[1],i.G==2)if(x[0]=="c"){i.K=x[1],i.ia=x[2];let W=x[3];W!=null&&(i.la=W,i.j.info("VER="+i.la));let H=x[4];H!=null&&(i.Aa=H,i.j.info("SVER="+i.Aa));let Ht=x[5];Ht!=null&&typeof Ht=="number"&&0<Ht&&(o=1.5*Ht,i.L=o,i.j.info("backChannelRequestTimeoutMs_="+o)),o=i;let ct=t.g;if(ct){let Ke=ct.g?ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ke){var _=o.h;_.g||Ke.indexOf("spdy")==-1&&Ke.indexOf("quic")==-1&&Ke.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(Un(_,_.h),_.h=null))}if(o.D){let Kn=ct.g?ct.g.getResponseHeader("X-HTTP-Session-Id"):null;Kn&&(o.ya=Kn,M(o.I,o.D,Kn))}}i.G=3,i.l&&i.l.ua(),i.ba&&(i.R=Date.now()-t.F,i.j.info("Handshake RTT: "+i.R+"ms")),o=i;var I=t;if(o.qa=ci(o,o.J?o.ia:null,o.W),I.K){Fr(o.h,I);var D=I,z=o.L;z&&(D.I=z),D.B&&(Ln(D),Oe(D)),o.g=I}else ri(o);0<i.i.length&&je(i)}else x[0]!="stop"&&x[0]!="close"||Bt(i,7);else i.G==3&&(x[0]=="stop"||x[0]=="close"?x[0]=="stop"?Bt(i,7):jn(i):x[0]!="noop"&&i.l&&i.l.ta(x),i.v=0)}}le(4)}catch{}}var Vo=class{constructor(t,n){this.g=t,this.map=n}};function kr(t){this.l=t||10,A.PerformanceNavigationTiming?(t=A.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mr(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Or(t){return t.h?1:t.g?t.g.size:0}function Bn(t,n){return t.h?t.h==n:t.g?t.g.has(n):!1}function Un(t,n){t.g?t.g.add(n):t.h=n}function Fr(t,n){t.h&&t.h==n?t.h=null:t.g&&t.g.has(n)&&t.g.delete(n)}kr.prototype.cancel=function(){if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Lr(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let n=t.i;for(let i of t.g.values())n=n.concat(i.D);return n}return $(t.i)}function Do(t){if(t.V&&typeof t.V=="function")return t.V();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(V(t)){for(var n=[],i=t.length,o=0;o<i;o++)n.push(t[o]);return n}n=[],i=0;for(o in t)n[i++]=t[o];return n}function No(t){if(t.na&&typeof t.na=="function")return t.na();if(!t.V||typeof t.V!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(V(t)||typeof t=="string"){var n=[];t=t.length;for(var i=0;i<t;i++)n.push(i);return n}n=[],i=0;for(let o in t)n[i++]=o;return n}}}function qr(t,n){if(t.forEach&&typeof t.forEach=="function")t.forEach(n,void 0);else if(V(t)||typeof t=="string")Array.prototype.forEach.call(t,n,void 0);else for(var i=No(t),o=Do(t),m=o.length,_=0;_<m;_++)n.call(void 0,o[_],i&&i[_],t)}var Br=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ko(t,n){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var o=t[i].indexOf("="),m=null;if(0<=o){var _=t[i].substring(0,o);m=t[i].substring(o+1)}else _=t[i];n(_,m?decodeURIComponent(m.replace(/\+/g," ")):"")}}}function qt(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof qt){this.h=t.h,Fe(this,t.j),this.o=t.o,this.g=t.g,Le(this,t.s),this.l=t.l;var n=t.i,i=new ge;i.i=n.i,n.g&&(i.g=new Map(n.g),i.h=n.h),Ur(this,i),this.m=t.m}else t&&(n=String(t).match(Br))?(this.h=!1,Fe(this,n[1]||"",!0),this.o=me(n[2]||""),this.g=me(n[3]||"",!0),Le(this,n[4]),this.l=me(n[5]||"",!0),Ur(this,n[6]||"",!0),this.m=me(n[7]||"")):(this.h=!1,this.i=new ge(null,this.h))}qt.prototype.toString=function(){var t=[],n=this.j;n&&t.push(pe(n,zr,!0),":");var i=this.g;return(i||n=="file")&&(t.push("//"),(n=this.o)&&t.push(pe(n,zr,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.s,i!=null&&t.push(":",String(i))),(i=this.l)&&(this.g&&i.charAt(0)!="/"&&t.push("/"),t.push(pe(i,i.charAt(0)=="/"?Fo:Oo,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.m)&&t.push("#",pe(i,qo)),t.join("")};function bt(t){return new qt(t)}function Fe(t,n,i){t.j=i?me(n,!0):n,t.j&&(t.j=t.j.replace(/:$/,""))}function Le(t,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);t.s=n}else t.s=null}function Ur(t,n,i){n instanceof ge?(t.i=n,Bo(t.i,t.h)):(i||(n=pe(n,Lo)),t.i=new ge(n,t.h))}function M(t,n,i){t.i.set(n,i)}function qe(t){return M(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function me(t,n){return t?n?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pe(t,n,i){return typeof t=="string"?(t=encodeURI(t).replace(n,Mo),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mo(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var zr=/[#\/\?@]/g,Oo=/[#\?:]/g,Fo=/[#\?]/g,Lo=/[#\?@]/g,qo=/#/g;function ge(t,n){this.h=this.g=null,this.i=t||null,this.j=!!n}function Vt(t){t.g||(t.g=new Map,t.h=0,t.i&&ko(t.i,function(n,i){t.add(decodeURIComponent(n.replace(/\+/g," ")),i)}))}s=ge.prototype,s.add=function(t,n){Vt(this),this.i=null,t=Qt(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(n),this.h+=1,this};function jr(t,n){Vt(t),n=Qt(t,n),t.g.has(n)&&(t.i=null,t.h-=t.g.get(n).length,t.g.delete(n))}function Gr(t,n){return Vt(t),n=Qt(t,n),t.g.has(n)}s.forEach=function(t,n){Vt(this),this.g.forEach(function(i,o){i.forEach(function(m){t.call(n,m,o,this)},this)},this)},s.na=function(){Vt(this);let t=Array.from(this.g.values()),n=Array.from(this.g.keys()),i=[];for(let o=0;o<n.length;o++){let m=t[o];for(let _=0;_<m.length;_++)i.push(n[o])}return i},s.V=function(t){Vt(this);let n=[];if(typeof t=="string")Gr(this,t)&&(n=n.concat(this.g.get(Qt(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)n=n.concat(t[i])}return n},s.set=function(t,n){return Vt(this),this.i=null,t=Qt(this,t),Gr(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[n]),this.h+=1,this},s.get=function(t,n){return t?(t=this.V(t),0<t.length?String(t[0]):n):n};function $r(t,n,i){jr(t,n),0<i.length&&(t.i=null,t.g.set(Qt(t,n),$(i)),t.h+=i.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],n=Array.from(this.g.keys());for(var i=0;i<n.length;i++){var o=n[i];let _=encodeURIComponent(String(o)),I=this.V(o);for(o=0;o<I.length;o++){var m=_;I[o]!==""&&(m+="="+encodeURIComponent(String(I[o]))),t.push(m)}}return this.i=t.join("&")};function Qt(t,n){return n=String(n),t.j&&(n=n.toLowerCase()),n}function Bo(t,n){n&&!t.j&&(Vt(t),t.i=null,t.g.forEach(function(i,o){var m=o.toLowerCase();o!=m&&(jr(this,o),$r(this,m,i))},t)),t.j=n}function Uo(t,n){let i=new de;if(A.Image){let o=new Image;o.onload=Ot(Dt,i,"TestLoadImage: loaded",!0,n,o),o.onerror=Ot(Dt,i,"TestLoadImage: error",!1,n,o),o.onabort=Ot(Dt,i,"TestLoadImage: abort",!1,n,o),o.ontimeout=Ot(Dt,i,"TestLoadImage: timeout",!1,n,o),A.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=t}else n(!1)}function zo(t,n){let i=new de,o=new AbortController,m=setTimeout(()=>{o.abort(),Dt(i,"TestPingServer: timeout",!1,n)},1e4);fetch(t,{signal:o.signal}).then(_=>{clearTimeout(m),_.ok?Dt(i,"TestPingServer: ok",!0,n):Dt(i,"TestPingServer: server error",!1,n)}).catch(()=>{clearTimeout(m),Dt(i,"TestPingServer: error",!1,n)})}function Dt(t,n,i,o,m){try{m&&(m.onload=null,m.onerror=null,m.onabort=null,m.ontimeout=null),o(i)}catch{}}function jo(){this.g=new Ao}function Go(t,n,i){let o=i||"";try{qr(t,function(m,_){let I=m;F(m)&&(I=Vn(m)),n.push(o+_+"="+encodeURIComponent(I))})}catch(m){throw n.push(o+"type="+encodeURIComponent("_badmap")),m}}function _e(t){this.l=t.Ub||null,this.j=t.eb||!1}N(_e,Dn),_e.prototype.g=function(){return new Be(this.l,this.j)},_e.prototype.i=function(t){return function(){return t}}({});function Be(t,n){Q.call(this),this.D=t,this.o=n,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Be,Q),s=Be.prototype,s.open=function(t,n){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=n,this.readyState=1,ve(this)},s.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let n={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(n.body=t),(this.D||A).fetch(new Request(this.A,n)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ye(this)),this.readyState=0},s.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ve(this)),this.g&&(this.readyState=3,ve(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kr(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kr(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}s.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var n=t.value?t.value:new Uint8Array(0);(n=this.v.decode(n,{stream:!t.done}))&&(this.response=this.responseText+=n)}t.done?ye(this):ve(this),this.readyState==3&&Kr(this)}},s.Ra=function(t){this.g&&(this.response=this.responseText=t,ye(this))},s.Qa=function(t){this.g&&(this.response=t,ye(this))},s.ga=function(){this.g&&ye(this)};function ye(t){t.readyState=4,t.l=null,t.j=null,t.v=null,ve(t)}s.setRequestHeader=function(t,n){this.u.append(t,n)},s.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],n=this.h.entries();for(var i=n.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=n.next();return t.join(`\r
`)};function ve(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Be.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function Qr(t){let n="";return dt(t,function(i,o){n+=o,n+=":",n+=i,n+=`\r
`}),n}function zn(t,n,i){t:{for(o in i){var o=!1;break t}o=!0}o||(i=Qr(i),typeof t=="string"?i!=null&&encodeURIComponent(String(i)):M(t,n,i))}function L(t){Q.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(L,Q);var $o=/^https?$/i,Ko=["POST","PUT"];s=L.prototype,s.Ha=function(t){this.J=t},s.ea=function(t,n,i,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);n=n?n.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mn.g(),this.v=this.o?Er(this.o):Er(Mn),this.g.onreadystatechange=B(this.Ea,this);try{this.B=!0,this.g.open(n,String(t),!0),this.B=!1}catch(_){Wr(this,_);return}if(t=i||"",i=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var m in o)i.set(m,o[m]);else if(typeof o.keys=="function"&&typeof o.get=="function")for(let _ of o.keys())i.set(_,o.get(_));else throw Error("Unknown input type for opt_headers: "+String(o));o=Array.from(i.keys()).find(_=>_.toLowerCase()=="content-type"),m=A.FormData&&t instanceof A.FormData,!(0<=Array.prototype.indexOf.call(Ko,n,void 0))||o||m||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[_,I]of i)this.g.setRequestHeader(_,I);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jr(this),this.u=!0,this.g.send(t),this.u=!1}catch(_){Wr(this,_)}};function Wr(t,n){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=n,t.m=5,Hr(t),Ue(t)}function Hr(t){t.A||(t.A=!0,Z(t,"complete"),Z(t,"error"))}s.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,Z(this,"complete"),Z(this,"abort"),Ue(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ue(this,!0)),L.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Yr(this):this.bb())},s.bb=function(){Yr(this)};function Yr(t){if(t.h&&typeof E<"u"&&(!t.v[1]||At(t)!=4||t.Z()!=2)){if(t.u&&At(t)==4)yr(t.Ea,0,t);else if(Z(t,"readystatechange"),At(t)==4){t.h=!1;try{let I=t.Z();t:switch(I){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var i;if(!(i=n)){var o;if(o=I===0){var m=String(t.D).match(Br)[1]||null;!m&&A.self&&A.self.location&&(m=A.self.location.protocol.slice(0,-1)),o=!$o.test(m?m.toLowerCase():"")}i=o}if(i)Z(t,"complete"),Z(t,"success");else{t.m=6;try{var _=2<At(t)?t.g.statusText:""}catch{_=""}t.l=_+" ["+t.Z()+"]",Hr(t)}}finally{Ue(t)}}}}function Ue(t,n){if(t.g){Jr(t);let i=t.g,o=t.v[0]?()=>{}:null;t.g=null,t.v=null,n||Z(t,"ready");try{i.onreadystatechange=o}catch{}}}function Jr(t){t.I&&(A.clearTimeout(t.I),t.I=null)}s.isActive=function(){return!!this.g};function At(t){return t.g?t.g.readyState:0}s.Z=function(){try{return 2<At(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(t){if(this.g){var n=this.g.responseText;return t&&n.indexOf(t)==0&&(n=n.substring(t.length)),bo(n)}};function Xr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Qo(t){let n={};t=(t.g&&2<=At(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let o=0;o<t.length;o++){if(ht(t[o]))continue;var i=f(t[o]);let m=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();let _=n[m]||[];n[m]=_,_.push(i)}p(n,function(o){return o.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function we(t,n,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||n}function Zr(t){this.Aa=0,this.i=[],this.j=new de,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=we("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=we("baseRetryDelayMs",5e3,t),this.cb=we("retryDelaySeedMs",1e4,t),this.Wa=we("forwardChannelMaxRetries",2,t),this.wa=we("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new kr(t&&t.concurrentRequestLimit),this.Da=new jo,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Zr.prototype,s.la=8,s.G=1,s.connect=function(t,n,i,o){tt(0),this.W=t,this.H=n||{},i&&o!==void 0&&(this.H.OSID=i,this.H.OAID=o),this.F=this.X,this.I=ci(this,null,this.W),je(this)};function jn(t){if(ti(t),t.G==3){var n=t.U++,i=bt(t.I);if(M(i,"SID",t.K),M(i,"RID",n),M(i,"TYPE","terminate"),Ie(t,i),n=new Rt(t,t.j,n),n.L=2,n.v=qe(bt(i)),i=!1,A.navigator&&A.navigator.sendBeacon)try{i=A.navigator.sendBeacon(n.v.toString(),"")}catch{}!i&&A.Image&&(new Image().src=n.v,i=!0),i||(n.g=ui(n.j,null),n.g.ea(n.v)),n.F=Date.now(),Oe(n)}ai(t)}function ze(t){t.g&&($n(t),t.g.cancel(),t.g=null)}function ti(t){ze(t),t.u&&(A.clearTimeout(t.u),t.u=null),Ge(t),t.h.cancel(),t.s&&(typeof t.s=="number"&&A.clearTimeout(t.s),t.s=null)}function je(t){if(!Mr(t.h)&&!t.s){t.s=!0;var n=t.Ga;ie||dr(),se||(ie(),se=!0),En.add(n,t),t.B=0}}function Wo(t,n){return Or(t.h)>=t.h.j-(t.s?1:0)?!1:t.s?(t.i=n.D.concat(t.i),!0):t.G==1||t.G==2||t.B>=(t.Va?0:t.Wa)?!1:(t.s=he(B(t.Ga,t,n),oi(t,t.B)),t.B++,!0)}s.Ga=function(t){if(this.s)if(this.s=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;let m=new Rt(this,this.j,t),_=this.o;if(this.S&&(_?(_=c(_),d(_,this.S)):_=this.S),this.m!==null||this.O||(m.H=_,_=null),this.P)t:{for(var n=0,i=0;i<this.i.length;i++){e:{var o=this.i[i];if("__data__"in o.map&&(o=o.map.__data__,typeof o=="string")){o=o.length;break e}o=void 0}if(o===void 0)break;if(n+=o,4096<n){n=i;break t}if(n===4096||i===this.i.length-1){n=i+1;break t}}n=1e3}else n=1e3;n=ni(this,m,n),i=bt(this.I),M(i,"RID",t),M(i,"CVER",22),this.D&&M(i,"X-HTTP-Session-Id",this.D),Ie(this,i),_&&(this.O?n="headers="+encodeURIComponent(String(Qr(_)))+"&"+n:this.m&&zn(i,this.m,_)),Un(this.h,m),this.Ua&&M(i,"TYPE","init"),this.P?(M(i,"$req",n),M(i,"SID","null"),m.T=!0,Fn(m,i,null)):Fn(m,i,n),this.G=2}}else this.G==3&&(t?ei(this,t):this.i.length==0||Mr(this.h)||ei(this))};function ei(t,n){var i;n?i=n.l:i=t.U++;let o=bt(t.I);M(o,"SID",t.K),M(o,"RID",i),M(o,"AID",t.T),Ie(t,o),t.m&&t.o&&zn(o,t.m,t.o),i=new Rt(t,t.j,i,t.B+1),t.m===null&&(i.H=t.o),n&&(t.i=n.D.concat(t.i)),n=ni(t,i,1e3),i.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Un(t.h,i),Fn(i,o,n)}function Ie(t,n){t.H&&dt(t.H,function(i,o){M(n,o,i)}),t.l&&qr({},function(i,o){M(n,o,i)})}function ni(t,n,i){i=Math.min(t.i.length,i);var o=t.l?B(t.l.Na,t.l,t):null;t:{var m=t.i;let _=-1;for(;;){let I=["count="+i];_==-1?0<i?(_=m[0].g,I.push("ofs="+_)):_=0:I.push("ofs="+_);let D=!0;for(let z=0;z<i;z++){let x=m[z].g,W=m[z].map;if(x-=_,0>x)_=Math.max(0,m[z].g-100),D=!1;else try{Go(W,I,"req"+x+"_")}catch{o&&o(W)}}if(D){o=I.join("&");break t}}}return t=t.i.splice(0,i),n.D=t,o}function ri(t){if(!t.g&&!t.u){t.Y=1;var n=t.Fa;ie||dr(),se||(ie(),se=!0),En.add(n,t),t.v=0}}function Gn(t){return t.g||t.u||3<=t.v?!1:(t.Y++,t.u=he(B(t.Fa,t),oi(t,t.v)),t.v++,!0)}s.Fa=function(){if(this.u=null,ii(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=he(B(this.ab,this),t)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),ze(this),ii(this))};function $n(t){t.A!=null&&(A.clearTimeout(t.A),t.A=null)}function ii(t){t.g=new Rt(t,t.j,"rpc",t.Y),t.m===null&&(t.g.H=t.o),t.g.O=0;var n=bt(t.qa);M(n,"RID","rpc"),M(n,"SID",t.K),M(n,"AID",t.T),M(n,"CI",t.F?"0":"1"),!t.F&&t.ja&&M(n,"TO",t.ja),M(n,"TYPE","xmlhttp"),Ie(t,n),t.m&&t.o&&zn(n,t.m,t.o),t.L&&(t.g.I=t.L);var i=t.g;t=t.ia,i.L=1,i.v=qe(bt(n)),i.m=null,i.P=!0,Vr(i,t)}s.Za=function(){this.C!=null&&(this.C=null,ze(this),Gn(this),tt(19))};function Ge(t){t.C!=null&&(A.clearTimeout(t.C),t.C=null)}function si(t,n){var i=null;if(t.g==n){Ge(t),$n(t),t.g=null;var o=2}else if(Bn(t.h,n))i=n.D,Fr(t.h,n),o=1;else return;if(t.G!=0){if(n.o)if(o==1){i=n.m?n.m.length:0,n=Date.now()-n.F;var m=t.B;o=Ne(),Z(o,new Cr(o,i)),je(t)}else ri(t);else if(m=n.s,m==3||m==0&&0<n.X||!(o==1&&Wo(t,n)||o==2&&Gn(t)))switch(i&&0<i.length&&(n=t.h,n.i=n.i.concat(i)),m){case 1:Bt(t,5);break;case 4:Bt(t,10);break;case 3:Bt(t,6);break;default:Bt(t,2)}}}function oi(t,n){let i=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(i*=2),i*n}function Bt(t,n){if(t.j.info("Error code "+n),n==2){var i=B(t.fb,t),o=t.Xa;let m=!o;o=new qt(o||"//www.google.com/images/cleardot.gif"),A.location&&A.location.protocol=="http"||Fe(o,"https"),qe(o),m?Uo(o.toString(),i):zo(o.toString(),i)}else tt(2);t.G=0,t.l&&t.l.sa(n),ai(t),ti(t)}s.fb=function(t){t?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function ai(t){if(t.G=0,t.ka=[],t.l){let n=Lr(t.h);(n.length!=0||t.i.length!=0)&&(U(t.ka,n),U(t.ka,t.i),t.h.i.length=0,$(t.i),t.i.length=0),t.l.ra()}}function ci(t,n,i){var o=i instanceof qt?bt(i):new qt(i);if(o.g!="")n&&(o.g=n+"."+o.g),Le(o,o.s);else{var m=A.location;o=m.protocol,n=n?n+"."+m.hostname:m.hostname,m=+m.port;var _=new qt(null);o&&Fe(_,o),n&&(_.g=n),m&&Le(_,m),i&&(_.l=i),o=_}return i=t.D,n=t.ya,i&&n&&M(o,i,n),M(o,"VER",t.la),Ie(t,o),o}function ui(t,n,i){if(n&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return n=t.Ca&&!t.pa?new L(new _e({eb:i})):new L(t.pa),n.Ha(t.J),n}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function li(){}s=li.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function $e(){}$e.prototype.g=function(t,n){return new rt(t,n)};function rt(t,n){Q.call(this),this.g=new Zr(n),this.l=t,this.h=n&&n.messageUrlParams||null,t=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(t?t["X-WebChannel-Content-Type"]=n.messageContentType:t={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.va&&(t?t["X-WebChannel-Client-Profile"]=n.va:t={"X-WebChannel-Client-Profile":n.va}),this.g.S=t,(t=n&&n.Sb)&&!ht(t)&&(this.g.m=t),this.v=n&&n.supportsCrossDomainXhr||!1,this.u=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!ht(n)&&(this.g.D=n,t=this.h,t!==null&&n in t&&(t=this.h,n in t&&delete t[n])),this.j=new Wt(this)}N(rt,Q),rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rt.prototype.close=function(){jn(this.g)},rt.prototype.o=function(t){var n=this.g;if(typeof t=="string"){var i={};i.__data__=t,t=i}else this.u&&(i={},i.__data__=Vn(t),t=i);n.i.push(new Vo(n.Ya++,t)),n.G==3&&je(n)},rt.prototype.N=function(){this.g.l=null,delete this.j,jn(this.g),delete this.g,rt.aa.N.call(this)};function hi(t){Nn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var n=t.__sm__;if(n){t:{for(let i in n){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,n=n!==null&&t in n?n[t]:void 0),this.data=n}else this.data=t}N(hi,Nn);function di(){kn.call(this),this.status=1}N(di,kn);function Wt(t){this.g=t}N(Wt,li),Wt.prototype.ua=function(){Z(this.g,"a")},Wt.prototype.ta=function(t){Z(this.g,new hi(t))},Wt.prototype.sa=function(t){Z(this.g,new di)},Wt.prototype.ra=function(){Z(this.g,"b")},$e.prototype.createWebChannel=$e.prototype.g,rt.prototype.send=rt.prototype.o,rt.prototype.open=rt.prototype.m,rt.prototype.close=rt.prototype.close,Ds=Ct.createWebChannelTransport=function(){return new $e},Vs=Ct.getStatEventTarget=function(){return Ne()},Rs=Ct.Event=Ft,xs=Ct.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,Ps=Ct.ErrorCode=ke,Pr.COMPLETE="complete",Cs=Ct.EventType=Pr,Tr.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",Q.prototype.listen=Q.prototype.K,Ss=Ct.WebChannel=Tr,ka=Ct.FetchXmlHttpFactory=_e,L.prototype.listenOnce=L.prototype.L,L.prototype.getLastError=L.prototype.Ka,L.prototype.getLastErrorCode=L.prototype.Ba,L.prototype.getStatus=L.prototype.Z,L.prototype.getResponseJson=L.prototype.Oa,L.prototype.getResponseText=L.prototype.oa,L.prototype.send=L.prototype.ea,L.prototype.setWithCredentials=L.prototype.Ha,As=Ct.XhrIo=L}).apply(typeof fn<"u"?fn:typeof self<"u"?self:typeof window<"u"?window:{});var Ns="@firebase/firestore",ks="4.7.16";var j=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};j.UNAUTHENTICATED=new j(null),j.GOOGLE_CREDENTIALS=new j("google-credentials-uid"),j.FIRST_PARTY=new j("first-party-uid"),j.MOCK_USER=new j("mock-user");var Ce="11.8.1";var te=new Ji("@firebase/firestore");function ut(s,...e){if(te.logLevel<=Xe.DEBUG){let r=e.map(ur);te.debug(`Firestore (${Ce}): ${s}`,...r)}}function js(s,...e){if(te.logLevel<=Xe.ERROR){let r=e.map(ur);te.error(`Firestore (${Ce}): ${s}`,...r)}}function Ma(s,...e){if(te.logLevel<=Xe.WARN){let r=e.map(ur);te.warn(`Firestore (${Ce}): ${s}`,...r)}}function ur(s){if(typeof s=="string")return s;try{return function(r){return JSON.stringify(r)}(s)}catch{return s}}function it(s,e,r){let a="Unexpected state";typeof e=="string"?a=e:r=e,Gs(s,a,r)}function Gs(s,e,r){let a=`FIRESTORE (${Ce}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(r!==void 0)try{a+=" CONTEXT: "+JSON.stringify(r)}catch{a+=" CONTEXT: "+r}throw js(a),new Error(a)}function zt(s,e,r,a){let h="Unexpected state";typeof r=="string"?h=r:a=r,s||Gs(e,h,a)}var et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Wi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var jt=class{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}};var mn=class{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Hn=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(j.UNAUTHENTICATED))}shutdown(){}},Yn=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}},Jn=class{constructor(e){this.t=e,this.currentUser=j.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){zt(this.o===void 0,42304);let a=this.i,h=V=>this.i!==a?(a=this.i,r(V)):Promise.resolve(),y=new jt;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new jt,e.enqueueRetryable(()=>h(this.currentUser))};let E=()=>{let V=y;e.enqueueRetryable(()=>Yt(this,null,function*(){yield V.promise,yield h(this.currentUser)}))},A=V=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=V,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit(V=>A(V)),setTimeout(()=>{if(!this.auth){let V=this.t.getImmediate({optional:!0});V?A(V):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new jt)}},0),E()}getToken(){let e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(zt(typeof a.accessToken=="string",31837,{l:a}),new mn(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string",2055,{h:e}),new j(e)}},Xn=class{constructor(e,r,a){this.P=e,this.T=r,this.I=a,this.type="FirstParty",this.user=j.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Zn=class{constructor(e,r,a){this.P=e,this.T=r,this.I=a}getToken(){return Promise.resolve(new Xn(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(j.FIRST_PARTY))}shutdown(){}invalidateToken(){}},pn=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tr=class{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){zt(this.o===void 0,3512);let a=y=>{y.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);let E=y.token!==this.m;return this.m=y.token,ut("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?r(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>a(y))};let h=y=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(y=>h(y)),setTimeout(()=>{if(!this.appCheck){let y=this.V.getImmediate({optional:!0});y?h(y):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pn(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(zt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new pn(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Oa(){return new TextEncoder}function Mt(s,e){return s<e?-1:s>e?1:0}function Fa(s,e){let r=0;for(;r<s.length&&r<e.length;){let a=s.codePointAt(r),h=e.codePointAt(r);if(a!==h){if(a<128&&h<128)return Mt(a,h);{let y=Oa(),E=La(y.encode(Ms(s,r)),y.encode(Ms(e,r)));return E!==0?E:Mt(a,h)}}r+=a>65535?2:1}return Mt(s.length,e.length)}function Ms(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function La(s,e){for(let r=0;r<s.length&&r<e.length;++r)if(s[r]!==e[r])return Mt(s[r],e[r]);return Mt(s.length,e.length)}var er=class s{constructor(e,r,a){r===void 0?r=0:r>e.length&&it(637,{offset:r,range:e.length}),a===void 0?a=e.length-r:a>e.length-r&&it(1746,{length:a,range:e.length-r}),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return s.comparator(this,e)===0}child(e){let r=this.segments.slice(this.offset,this.limit());return e instanceof s?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){let a=Math.min(e.length,r.length);for(let h=0;h<a;h++){let y=s.compareSegments(e.get(h),r.get(h));if(y!==0)return y}return Mt(e.length,r.length)}static compareSegments(e,r){let a=s.isNumericId(e),h=s.isNumericId(r);return a&&!h?-1:!a&&h?1:a&&h?s.extractNumericId(e).compare(s.extractNumericId(r)):Fa(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dn.fromString(e.substring(4,e.length-2))}},kt=class s extends er{construct(e,r,a){return new s(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let r=[];for(let a of e){if(a.indexOf("//")>=0)throw new G(et.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new s(r)}static emptyPath(){return new s([])}};var Gt=class s{constructor(e){this.path=e}static fromPath(e){return new s(kt.fromString(e))}static fromName(e){return new s(kt.fromString(e).popFirst(5))}static empty(){return new s(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return kt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new s(new kt(e.slice()))}};var nr=class{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}};nr.UNKNOWN_ID=-1;function qa(s){return s.name==="IndexedDbTransactionError"}function Ba(s){return s===0&&1/s==-1/0}var Ua="remoteDocuments",$s="owner";var Ks="mutationQueues";var Qs="mutations";var Ws="documentMutations",za="remoteDocumentsV14";var Hs="remoteDocumentGlobal";var Ys="targets";var Js="targetDocuments";var Xs="targetGlobal",Zs="collectionParents";var to="clientMetadata";var eo="bundles";var no="namedQueries";var ja="indexConfiguration";var Ga="indexState";var $a="indexEntries";var ro="documentOverlays";var Ka="globals";var Qa=[Ks,Qs,Ws,Ua,Ys,$s,Xs,Js,to,Hs,Zs,eo,no],Pu=[...Qa,ro],Wa=[Ks,Qs,Ws,za,Ys,$s,Xs,Js,to,Hs,Zs,eo,no,ro],Ha=Wa,Ya=[...Ha,ja,Ga,$a];var xu=[...Ya,Ka];var ee=class s{constructor(e,r){this.comparator=e,this.root=r||Et.EMPTY}insert(e,r){return new s(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new s(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){let a=this.comparator(e,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){let h=this.comparator(e,a.key);if(h===0)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){let e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zt(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zt(this.root,e,this.comparator,!0)}},Zt=class{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=r?a(e.key,r):1,r&&h&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(y===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Et=class s{constructor(e,r,a,h,y){this.key=e,this.value=r,this.color=a??s.RED,this.left=h??s.EMPTY,this.right=y??s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,y){return new s(e??this.key,r??this.value,a??this.color,h??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this,y=a(e,h.key);return h=y<0?h.copy(null,null,null,h.left.insert(e,r,a),null):y===0?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),r(e,h.key)===0){if(h.right.isEmpty())return s.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw it(43730,{key:this.key,value:this.value});if(this.right.isRed())throw it(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw it(27949);return e+(this.isRed()?0:1)}};Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw it(57766)}get value(){throw it(16141)}get color(){throw it(16727)}get left(){throw it(29726)}get right(){throw it(36894)}copy(e,r,a,h,y){return this}insert(e,r,a){return new Et(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var gn=class s{constructor(e){this.comparator=e,this.data=new ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){let a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){let h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){let r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new _n(this.data.getIterator())}getIteratorFrom(e){return new _n(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof s)||this.size!==e.size)return!1;let r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){let h=r.getNext().key,y=a.getNext().key;if(this.comparator(h,y)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(r=>{e.push(r)}),e}toString(){let e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){let r=new s(this.comparator);return r.data=e,r}},_n=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rr=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ne=class s{constructor(e){this.binaryString=e}static fromBase64String(e){let r=function(h){try{return atob(h)}catch(y){throw typeof DOMException<"u"&&y instanceof DOMException?new rr("Invalid base64 string: "+y):y}}(e);return new s(r)}static fromUint8Array(e){let r=function(h){let y="";for(let E=0;E<h.length;++E)y+=String.fromCharCode(h[E]);return y}(e);return new s(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){let a=new Uint8Array(r.length);for(let h=0;h<r.length;h++)a[h]=r.charCodeAt(h);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ne.EMPTY_BYTE_STRING=new ne("");var Ja=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xa(s){if(zt(!!s,39018),typeof s=="string"){let e=0,r=Ja.exec(s);if(zt(!!r,46558,{timestamp:s}),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}let a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Se(s.seconds),nanos:Se(s.nanos)}}function Se(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Za(s){return typeof s=="string"?ne.fromBase64String(s):ne.fromUint8Array(s)}var ir="(default)",sr=class s{constructor(e,r){this.projectId=e,this.database=r||ir}static empty(){return new s("","")}get isDefaultDatabase(){return this.database===ir}isEqual(e){return e instanceof s&&e.projectId===this.projectId&&e.database===this.database}};var io="__type__",tc="__max__";var so="__vector__",oo="value";function ec(s){var e,r;return((r=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[io])===null||r===void 0?void 0:r.stringValue)===so}function nc(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===tc}var Vu={mapValue:{fields:{[io]:{stringValue:so},[oo]:{arrayValue:{}}}}};var Du=new ee(Gt.comparator);var Nu=new ee(Gt.comparator);var ku=new ee(Gt.comparator),Mu=new gn(Gt.comparator);var Ou=new gn(Mt);var Os,P;(P=Os||(Os={}))[P.OK=0]="OK",P[P.CANCELLED=1]="CANCELLED",P[P.UNKNOWN=2]="UNKNOWN",P[P.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",P[P.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",P[P.NOT_FOUND=5]="NOT_FOUND",P[P.ALREADY_EXISTS=6]="ALREADY_EXISTS",P[P.PERMISSION_DENIED=7]="PERMISSION_DENIED",P[P.UNAUTHENTICATED=16]="UNAUTHENTICATED",P[P.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",P[P.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",P[P.ABORTED=10]="ABORTED",P[P.OUT_OF_RANGE=11]="OUT_OF_RANGE",P[P.UNIMPLEMENTED=12]="UNIMPLEMENTED",P[P.INTERNAL=13]="INTERNAL",P[P.UNAVAILABLE=14]="UNAVAILABLE",P[P.DATA_LOSS=15]="DATA_LOSS";var Fu=new dn([4294967295,4294967295],0);var yn=class{constructor(){}vt(e,r){this.Ct(e,r),r.Ft()}Ct(e,r){if("nullValue"in e)this.Mt(r,5);else if("booleanValue"in e)this.Mt(r,10),r.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(r,15),r.xt(Se(e.integerValue));else if("doubleValue"in e){let a=Se(e.doubleValue);isNaN(a)?this.Mt(r,13):(this.Mt(r,15),Ba(a)?r.xt(0):r.xt(a))}else if("timestampValue"in e){let a=e.timestampValue;this.Mt(r,20),typeof a=="string"&&(a=Xa(a)),r.Ot(`${a.seconds||""}`),r.xt(a.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,r),this.Bt(r);else if("bytesValue"in e)this.Mt(r,30),r.Lt(Za(e.bytesValue)),this.Bt(r);else if("referenceValue"in e)this.kt(e.referenceValue,r);else if("geoPointValue"in e){let a=e.geoPointValue;this.Mt(r,45),r.xt(a.latitude||0),r.xt(a.longitude||0)}else"mapValue"in e?nc(e)?this.Mt(r,Number.MAX_SAFE_INTEGER):ec(e)?this.qt(e.mapValue,r):(this.Qt(e.mapValue,r),this.Bt(r)):"arrayValue"in e?(this.$t(e.arrayValue,r),this.Bt(r)):it(19022,{Ut:e})}Nt(e,r){this.Mt(r,25),this.Kt(e,r)}Kt(e,r){r.Ot(e)}Qt(e,r){let a=e.fields||{};this.Mt(r,55);for(let h of Object.keys(a))this.Nt(h,r),this.Ct(a[h],r)}qt(e,r){var a,h;let y=e.fields||{};this.Mt(r,53);let E=oo,A=((h=(a=y[E].arrayValue)===null||a===void 0?void 0:a.values)===null||h===void 0?void 0:h.length)||0;this.Mt(r,15),r.xt(Se(A)),this.Nt(E,r),this.Ct(y[E],r)}$t(e,r){let a=e.values||[];this.Mt(r,50);for(let h of a)this.Ct(h,r)}kt(e,r){this.Mt(r,37),Gt.fromName(e).path.forEach(a=>{this.Mt(r,60),this.Kt(a,r)})}Mt(e,r){e.xt(r)}Bt(e){e.xt(2)}};yn.Wt=new yn;var Lu=new Uint8Array(0);var ao=41943040,It=class s{static withCacheSize(e){return new s(e,s.DEFAULT_COLLECTION_PERCENTILE,s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}};It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(ao,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);var rc=1048576;function Wn(){return typeof document<"u"?document:null}var or=class{constructor(e,r,a=1e3,h=1.5,y=6e4){this.xi=e,this.timerId=r,this.I_=a,this.E_=h,this.d_=y,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();let r=Math.floor(this.A_+this.g_()),a=Math.max(0,Date.now()-this.V_),h=Math.max(0,r-a);h>0&&ut("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.A_} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,h,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}};var ar=class s{constructor(e,r,a,h,y){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=y,this.deferred=new jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,a,h,y){let E=Date.now()+a,A=new s(e,r,E,h,y);return A.start(a),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Fs,Ls;(Ls=Fs||(Fs={})).Ca="default",Ls.Cache="cache";function ic(s){let e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}var qs=new Map;function sc(s,e,r,a){if(e===!0&&a===!0)throw new G(et.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function oc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{let e=function(a){return a.constructor?a.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":it(12329,{type:typeof s})}function ac(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new G(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=oc(s);throw new G(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}var co="firestore.googleapis.com",Bs=!0,vn=class{constructor(e){var r,a;if(e.host===void 0){if(e.ssl!==void 0)throw new G(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=co,this.ssl=Bs}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:Bs;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ao;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rc)throw new G(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ic((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(y){if(y.timeoutSeconds!==void 0){if(isNaN(y.timeoutSeconds))throw new G(et.INVALID_ARGUMENT,`invalid long polling timeout: ${y.timeoutSeconds} (must not be NaN)`);if(y.timeoutSeconds<5)throw new G(et.INVALID_ARGUMENT,`invalid long polling timeout: ${y.timeoutSeconds} (minimum allowed value is 5)`);if(y.timeoutSeconds>30)throw new G(et.INVALID_ARGUMENT,`invalid long polling timeout: ${y.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,h){return a.timeoutSeconds===h.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},wn=class{constructor(e,r,a,h){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vn({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vn(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Hn;switch(a.type){case"firstParty":return new Zn(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new G(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return Yt(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){let a=qs.get(r);a&&(ut("ComponentProvider","Removing Datastore"),qs.delete(r),a.terminate())}(this),Promise.resolve()}};function uo(s,e,r,a={}){var h;s=ac(s,wn);let y=Gi(e),E=s._getSettings(),A=Object.assign(Object.assign({},E),{emulatorOptions:s._getEmulatorOptions()}),V=`${e}:${r}`;y&&($i(`https://${V}`),Qi("Firestore",!0)),E.host!==co&&E.host!==V&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let F=Object.assign(Object.assign({},E),{host:V,ssl:y,emulatorOptions:a});if(!Hi(F,A)&&(s._setSettings(F),a.mockUserToken)){let lt,st;if(typeof a.mockUserToken=="string")lt=a.mockUserToken,st=j.MOCK_USER;else{lt=Ki(a.mockUserToken,(h=s._app)===null||h===void 0?void 0:h.options.projectId);let B=a.mockUserToken.sub||a.mockUserToken.user_id;if(!B)throw new G(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");st=new j(B)}s._authCredentials=new Yn(new mn(lt,st))}}var Us="AsyncQueue",In=class{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new or(this,"async_queue_retry"),this.ec=()=>{let a=Wn();a&&ut(Us,"Visibility state changed to "+a.visibilityState),this.C_.p_()},this.tc=e;let r=Wn();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;let r=Wn();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});let r=new jt;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}sc(){return Yt(this,null,function*(){if(this.zu.length!==0){try{yield this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!qa(e))throw e;ut(Us,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}})}rc(e){let r=this.tc.then(()=>(this.Yu=!0,e().catch(a=>{throw this.Ju=a,this.Yu=!1,js("INTERNAL UNHANDLED ERROR: ",zs(a)),a}).then(a=>(this.Yu=!1,a))));return this.tc=r,r}enqueueAfterDelay(e,r,a){this.nc(),this.Xu.indexOf(e)>-1&&(r=0);let h=ar.createAndSchedule(this,e,r,a,y=>this.oc(y));return this.Hu.push(h),h}nc(){this.Ju&&it(47125,{_c:zs(this.Ju)})}verifyOperationInProgress(){}ac(){return Yt(this,null,function*(){let e;do e=this.tc,yield e;while(e!==this.tc)})}uc(e){for(let r of this.Hu)if(r.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(let r of this.Hu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){let r=this.Hu.indexOf(e);this.Hu.splice(r,1)}};function zs(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}var cr=class extends wn{constructor(e,r,a,h){super(e,r,a,h),this.type="firestore",this._queue=new In,this._persistenceKey=h?.name||"[DEFAULT]"}_terminate(){return Yt(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new In(e),this._firestoreClient=void 0,yield e}})}};function lo(s,e){let r=typeof s=="object"?s:ns(),a=typeof s=="string"?s:e||ir,h=Zi(r,"firestore").getImmediate({identifier:a});if(!h._initialized){let y=ji("firestore");y&&uo(h,...y)}return h}var qu=new RegExp("[~\\*/\\[\\]]");(function(e,r=!0){(function(h){Ce=h})(es),Xi(new Yi("firestore",(a,{instanceIdentifier:h,options:y})=>{let E=a.getProvider("app").getImmediate(),A=new cr(new Jn(a.getProvider("auth-internal")),new tr(E,a.getProvider("app-check-internal")),function(F,lt){if(!Object.prototype.hasOwnProperty.apply(F.options,["projectId"]))throw new G(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sr(F.options.projectId,lt)}(E,h),E);return y=Object.assign({useFetchStreams:r},y),A._setSettings(y),A},"PUBLIC").setMultipleInstances(!0)),be(Ns,ks,e),be(Ns,ks,"esm2017")})();var Pe=class{constructor(e){return e}},ho="firestore",lr=class{constructor(){return ss(ho)}};var hr=new mi("angularfire2.firestore-instances");function cc(s,e){let r=is(ho,s,e);return r&&new Pe(r)}function uc(s){return(e,r)=>{let a=e.runOutsideAngular(()=>s(r));return new Pe(a)}}var lc={provide:lr,deps:[[new Te,hr]]},hc={provide:Pe,useFactory:cc,deps:[[new Te,hr],cs]};function fo(s,...e){return be("angularfire",rs.full,"fst"),gi([hc,lc,{provide:hr,useFactory:uc(s),multi:!0,deps:[Ei,wi,os,us,[new Te,fs],[new Te,ds],...e]}])}var mo=as(lo,!0);ki(tn,{providers:[Oi(),Li(Is),ls(()=>hs(Ae.firebase)),ms(()=>ps()),fo(()=>mo()),_i(at,X)]});
